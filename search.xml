<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>18，网络文件系统--安装配置nfs</title>
      <link href="/2019/07/20/18%EF%BC%8C%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F--%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEnfs/"/>
      <url>/2019/07/20/18%EF%BC%8C%E7%BD%91%E7%BB%9C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F--%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEnfs/</url>
      <content type="html"><![CDATA[<h3 id="NFS服务端部署流程"><a href="#NFS服务端部署流程" class="headerlink" title="NFS服务端部署流程"></a>NFS服务端部署流程</h3><h4 id="1，安装nfs和rpcbind"><a href="#1，安装nfs和rpcbind" class="headerlink" title="1，安装nfs和rpcbind"></a>1，安装nfs和rpcbind</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">yum install nfs-utils rpcbind  -y</span><br><span class="line">[root@nfs01 ~]<span class="comment"># rpm -qa nfs-utils rpcbind </span></span><br><span class="line">rpcbind-0.2.0-16.el6.x86_64</span><br><span class="line">nfs-utils-1.2.3-78.el6.x86_64</span><br></pre></td></tr></table></figure><h4 id="2，启动rpcbind和nfs服务"><a href="#2，启动rpcbind和nfs服务" class="headerlink" title="2，启动rpcbind和nfs服务"></a>2，启动rpcbind和nfs服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">先启动rpcbind</span><br><span class="line">/etc/init.d/rpcbind start</span><br><span class="line">[root@nfs01 ~]<span class="comment"># /etc/init.d/rpcbind start</span></span><br><span class="line">Starting rpcbind:                                          [  OK  ]</span><br><span class="line">查看rpc信息</span><br><span class="line">[root@nfs01 ~]<span class="comment"># rpcinfo -p 10.0.0.31</span></span><br><span class="line">[root@nfs01 ~]<span class="comment"># rpcinfo -p localhost  </span></span><br><span class="line">[root@nfs01 ~]<span class="comment"># rpcinfo -p </span></span><br><span class="line">   program vers proto   port  service</span><br><span class="line">    100000    4   tcp    111  portmapper</span><br><span class="line">    100000    3   tcp    111  portmapper</span><br><span class="line">    100000    2   tcp    111  portmapper</span><br><span class="line">    100000    4   udp    111  portmapper</span><br><span class="line">    100000    3   udp    111  portmapper</span><br><span class="line">    100000    2   udp    111  portmapper</span><br><span class="line">再启动nfs</span><br><span class="line">/etc/init.d/nfs start</span><br><span class="line">rpcinfo -p</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="3，开机自启动"><a href="#3，开机自启动" class="headerlink" title="3，开机自启动"></a>3，开机自启动</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">chkconfig nfs on</span><br><span class="line">chkconfig rpcbind on</span><br><span class="line">grep <span class="string">'# chkconfig:'</span> /etc/init.d/&#123;nfs,rpcbind&#125;</span><br><span class="line">/etc/init.d/nfs:<span class="comment"># chkconfig: - 30 60</span></span><br><span class="line">/etc/init.d/rpcbind:<span class="comment"># chkconfig: 2345 13 87</span></span><br><span class="line">[root@nfs01 ~]<span class="comment"># chkconfig |egrep "nfs |rpcbind "</span></span><br><span class="line">nfs            0:off1:off2:on3:on4:on5:on6:off</span><br><span class="line">rpcbind        0:off1:off2:on3:on4:on5:on6:off</span><br></pre></td></tr></table></figure><h4 id="4，创建-data目录，更改所属用户和用户组"><a href="#4，创建-data目录，更改所属用户和用户组" class="headerlink" title="4，创建/data目录，更改所属用户和用户组"></a>4，创建/data目录，更改所属用户和用户组</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir /data -p</span><br><span class="line">chown -R nfsnobody.nfsnobody /data/</span><br></pre></td></tr></table></figure><h4 id="5，配置NFS服务-分享-data目录"><a href="#5，配置NFS服务-分享-data目录" class="headerlink" title="5，配置NFS服务,分享/data目录"></a>5，配置NFS服务,分享/data目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/exports</span><br><span class="line"><span class="comment">#share /data 172.16.1.0/24</span></span><br><span class="line">/data 172.16.1.0/24(rw,sync)</span><br><span class="line"></span><br><span class="line">cat &gt;/etc/exports&lt;&lt;EOF</span><br><span class="line"><span class="comment">#share /data 172.16.1.0/24</span></span><br><span class="line">/data 172.16.1.0/24(rw,sync)</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h4 id="6，重启nfs服务"><a href="#6，重启nfs服务" class="headerlink" title="6，重启nfs服务"></a>6，重启nfs服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#centos 6</span></span><br><span class="line">/etc/init.d/nfs reload</span><br><span class="line"></span><br><span class="line"><span class="comment">#centos 7</span></span><br><span class="line">systemctl restart nfs</span><br></pre></td></tr></table></figure><h4 id="7，检查nfs是否配置正确"><a href="#7，检查nfs是否配置正确" class="headerlink" title="7，检查nfs是否配置正确"></a>7，检查nfs是否配置正确</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpcinfo -p 172.16.1.31</span><br><span class="line">showmount -e 172.16.1.31</span><br><span class="line"><span class="comment"># Export list for 172.16.1.31:</span></span><br><span class="line"><span class="comment"># /data 172.16.1.0/24</span></span><br></pre></td></tr></table></figure><h4 id="8，本地挂载测试"><a href="#8，本地挂载测试" class="headerlink" title="8，本地挂载测试"></a>8，本地挂载测试</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mount -t nfs 172.16.1.31:/data /mnt/</span><br><span class="line">df -h</span><br><span class="line"></span><br><span class="line">测试完成之后，卸载目录</span><br><span class="line">umount /mnt/</span><br></pre></td></tr></table></figure><h3 id="NFS客户端配置流程"><a href="#NFS客户端配置流程" class="headerlink" title="NFS客户端配置流程"></a>NFS客户端配置流程</h3><h4 id="1，安装nfs和rpcbind-1"><a href="#1，安装nfs和rpcbind-1" class="headerlink" title="1，安装nfs和rpcbind"></a>1，安装nfs和rpcbind</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install nfs-utils.x86_64 rpcbind.x86_64 -y</span><br><span class="line">rpm -qa nfs-utils rpcbind</span><br></pre></td></tr></table></figure><h4 id="2，开启rpcbind服务，设置成开机自启动，并检查"><a href="#2，开启rpcbind服务，设置成开机自启动，并检查" class="headerlink" title="2，开启rpcbind服务，设置成开机自启动，并检查"></a>2，开启rpcbind服务，设置成开机自启动，并检查</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/rpcbind start</span><br><span class="line">chkconfig rpcbind on</span><br><span class="line">chkconfig nfs off</span><br><span class="line"></span><br><span class="line">rpcinfo -p</span><br><span class="line">chkconfig | egrep <span class="string">'nfs|rpcbind'</span></span><br><span class="line">ps -ef | egrep <span class="string">'nfs|rpcbind'</span></span><br></pre></td></tr></table></figure><h4 id="3，创建目录并挂载"><a href="#3，创建目录并挂载" class="headerlink" title="3，创建目录并挂载"></a>3，创建目录并挂载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查服务端是否可用</span></span><br><span class="line">showmount -e 172.16.1.31</span><br><span class="line"></span><br><span class="line">mkdir /upload -p</span><br><span class="line">mount -t nfs 172.16.1.31:/data /upload</span><br></pre></td></tr></table></figure><h4 id="4，检查是否挂载成功"><a href="#4，检查是否挂载成功" class="headerlink" title="4，检查是否挂载成功"></a>4，检查是否挂载成功</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df -h</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /upload</span><br><span class="line">touch &#123;a..e&#125;.txt</span><br><span class="line"></span><br><span class="line">服务器端查看是否有文件</span><br><span class="line">ll /data/</span><br></pre></td></tr></table></figure><h4 id="5，永久生效，开机自动挂载"><a href="#5，永久生效，开机自动挂载" class="headerlink" title="5，永久生效，开机自动挂载"></a>5，永久生效，开机自动挂载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">方法一：（推荐）</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'/bin/mount -t nfs 172.16.1.31:/data /upload'</span> &gt;&gt;/etc/rc.local</span><br><span class="line"></span><br><span class="line">方法二：</span><br><span class="line">2./etc/fstab</span><br><span class="line">如果把客户端挂载命令 放在/etc/fstab里面</span><br><span class="line">因为系统先读取/etc/fstab 自动挂载列表。</span><br><span class="line">然后启动network服务。</span><br><span class="line">需要让netfs服务开机自启动就可以继续使用fstab开机自动挂载nfs。</span><br></pre></td></tr></table></figure><h3 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h3><h4 id="1）Starting-NFS-quotas-Cannot-register-service-RPC-Unable-to-receive-errno-Connection-refused"><a href="#1）Starting-NFS-quotas-Cannot-register-service-RPC-Unable-to-receive-errno-Connection-refused" class="headerlink" title="1）Starting NFS quotas: Cannot register service: RPC: Unable to receive; errno = Connection refused"></a>1）Starting NFS quotas: Cannot register service: RPC: Unable to receive; errno = Connection refused</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/nfs start</span><br><span class="line">[root@nfs01 ~]<span class="comment"># service nfs start</span></span><br><span class="line">Starting NFS services:                                     [  OK  ]</span><br><span class="line">Starting NFS quotas: Cannot register service: RPC: Unable to receive; errno = Connection refused</span><br><span class="line">rpc.rquotad: unable to register (RQUOTAPROG, RQUOTAVERS, udp).</span><br><span class="line">                                                           [FAILED]</span><br><span class="line">Starting NFS mountd:                                       [FAILED]</span><br><span class="line">Starting NFS daemon: rpc.nfsd: writing fd to kernel failed: errno 111 (Connection refused)</span><br><span class="line">rpc.nfsd: unable to <span class="built_in">set</span> any sockets <span class="keyword">for</span> nfsd</span><br><span class="line">                                                           [FAILED]</span><br><span class="line">没有先开启rpcbind服务</span><br></pre></td></tr></table></figure><h4 id="2）配置文件没有配置好"><a href="#2）配置文件没有配置好" class="headerlink" title="2）配置文件没有配置好"></a>2）配置文件没有配置好</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 ~]<span class="comment"># showmount -e 10.0.0.24</span></span><br><span class="line">Export list <span class="keyword">for</span> 10.0.0.24:</span><br><span class="line">[root@nfs01 ~]<span class="comment">#</span></span><br><span class="line">配置文件中，没有配置共享目录</span><br></pre></td></tr></table></figure><h4 id="3）exportfs-Failed-to-stat-data-No-such-file-or-directory"><a href="#3）exportfs-Failed-to-stat-data-No-such-file-or-directory" class="headerlink" title="3）exportfs: Failed to stat /data: No such file or directory"></a>3）exportfs: Failed to stat /data: No such file or directory</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 ~]<span class="comment"># /etc/init.d/nfs reload</span></span><br><span class="line">exportfs: Failed to <span class="built_in">stat</span> /data: No such file or directory</span><br><span class="line"></span><br><span class="line">没有创建/data目录</span><br><span class="line">mkdir /data</span><br><span class="line">chown nfsnobody.nfsnobody /data</span><br></pre></td></tr></table></figure><h4 id="4）mount-nfs-remote-share-not-in-‘host-dir’-format"><a href="#4）mount-nfs-remote-share-not-in-‘host-dir’-format" class="headerlink" title="4）mount.nfs: remote share not in ‘host:dir’ format"></a>4）mount.nfs: remote share not in ‘host:dir’ format</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 ~]<span class="comment"># mount -t nfs /data /mnt</span></span><br><span class="line">mount.nfs: remote share not <span class="keyword">in</span> <span class="string">'host:dir'</span> format</span><br><span class="line">[root@nfs01 ~]<span class="comment"># mount -t nfs 10.0.0.24:/data /mnt</span></span><br><span class="line"></span><br><span class="line">本地挂载也要加上IP</span><br></pre></td></tr></table></figure><h4 id="5）touch-cannot-touch-a-txt’-Permission-denied"><a href="#5）touch-cannot-touch-a-txt’-Permission-denied" class="headerlink" title="5）touch: cannot touch `a.txt’: Permission denied"></a>5）touch: cannot touch `a.txt’: Permission denied</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 /mnt]<span class="comment"># touch &#123;a..e&#125;.txt</span></span><br><span class="line">touch: cannot touch `a.txt<span class="string">': Permission denied</span></span><br><span class="line"><span class="string">touch: cannot touch `b.txt'</span>: Permission denied</span><br><span class="line">touch: cannot touch `c.txt<span class="string">': Permission denied</span></span><br><span class="line"><span class="string">touch: cannot touch `d.txt'</span>: Permission denied</span><br><span class="line">touch: cannot touch `e.txt<span class="string">': Permission denied</span></span><br><span class="line"><span class="string">/data 目录的所属用户和用户组不对</span></span><br><span class="line"><span class="string">chown nfsnobody.nfsnobody /data</span></span><br></pre></td></tr></table></figure><h4 id="6）exportfs-No-host-name-given-with-data-rw-sync-suggest-rw-sync-to-avoid-warning"><a href="#6）exportfs-No-host-name-given-with-data-rw-sync-suggest-rw-sync-to-avoid-warning" class="headerlink" title="6）exportfs: No host name given with /data (rw,sync), suggest *(rw,sync) to avoid warning"></a>6）exportfs: No host name given with /data (rw,sync), suggest *(rw,sync) to avoid warning</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 /]<span class="comment"># /etc/init.d/nfs start</span></span><br><span class="line">Starting NFS services:  exportfs: No options <span class="keyword">for</span> /data 10.0.0.0/24: suggest 10.0.0.0/24(sync) to avoid warning</span><br><span class="line">exportfs: No host name given with /data (rw,sync), suggest *(rw,sync) to avoid warning</span><br><span class="line">                                                           [  OK  ]</span><br><span class="line">Starting NFS quotas:                                       [  OK  ]</span><br><span class="line">Starting NFS mountd:                                       [  OK  ]</span><br><span class="line">Starting NFS daemon:                                       [  OK  ]</span><br><span class="line">Starting RPC idmapd:                                       [  OK  ]</span><br><span class="line">配置文件中（）前面和IP地址之间不能有空格</span><br></pre></td></tr></table></figure><h4 id="7）exportfs-etc-exports-1-syntax-error-bad-option-list"><a href="#7）exportfs-etc-exports-1-syntax-error-bad-option-list" class="headerlink" title="7）exportfs: /etc/exports:1: syntax error: bad option list"></a>7）exportfs: /etc/exports:1: syntax error: bad option list</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@nfs01 /]<span class="comment"># /etc/init.d/nfs reload </span></span><br><span class="line">exportfs: /etc/exports:1: syntax error: bad option list</span><br><span class="line">/data 10.0.0.0/24(rw,sync)</span><br><span class="line"></span><br><span class="line">10.0.0.0/24(rw,sync)</span><br><span class="line">在)右小括号括过来之前，都不能有空格，右小括号之后有空格，reload不会报错</span><br><span class="line">左小括号左右、逗号左右，都不能有空格</span><br><span class="line"></span><br><span class="line">selinux</span><br><span class="line">iptables</span><br><span class="line">共享目录没有授权</span><br><span class="line">网段写错了</span><br><span class="line">网络不通</span><br><span class="line">rpcbind,nfs顺序</span><br><span class="line">rpcbind服务重启后，不认识nfs了</span><br><span class="line">rpcbind 服务没有启动（portmap）</span><br><span class="line">[root@ nfs01~]<span class="comment">#/etc/init.d/rpcbind stop</span></span><br><span class="line">[root@ nfs01~]<span class="comment"># showmount-e 172.16.1.31.</span></span><br><span class="line">clnt_create: RPC: Port mapper failure-Unable to receive: errno 111 (Connection refused)</span><br><span class="line">[root@ nfs01~]<span class="comment"># rpcinfo -p 172.16.1.31</span></span><br><span class="line">rpcinfo: can<span class="string">'t contact portmapper: RPC: Remote system error-Connection refused.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">重启rpcbind服务导致的问题-RPC:Program not registered。</span></span><br></pre></td></tr></table></figure><h3 id="客户端错误"><a href="#客户端错误" class="headerlink" title="客户端错误"></a>客户端错误</h3><h4 id="1）mount-nfs-mount-point-upload-does-not-exist"><a href="#1）mount-nfs-mount-point-upload-does-not-exist" class="headerlink" title="1）mount.nfs: mount point /upload does not exist"></a>1）mount.nfs: mount point /upload does not exist</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 ~]<span class="comment"># mount -t nfs 10.0.0.24:/data /upload</span></span><br><span class="line">mount.nfs: mount point /upload does not exist</span><br><span class="line">[root@web01 ~]<span class="comment"># mkdir /upload</span></span><br><span class="line">[root@web01 ~]<span class="comment"># mount -t nfs 10.0.0.24:/data /upload</span></span><br><span class="line"></span><br><span class="line">/upload目录不存在</span><br><span class="line">mkdir /upload</span><br></pre></td></tr></table></figure><h4 id="2）umount-nfs-upload-device-is-busy"><a href="#2）umount-nfs-upload-device-is-busy" class="headerlink" title="2）umount.nfs: /upload: device is busy"></a>2）umount.nfs: /upload: device is busy</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 /upload]<span class="comment"># umount /upload </span></span><br><span class="line">umount.nfs: /upload: device is busy</span><br><span class="line">umount.nfs: /upload: device is busy</span><br><span class="line"></span><br><span class="line">退出/upload目录，再卸载</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line">umount /upload</span><br></pre></td></tr></table></figure><h4 id="3）touch-cannot-touch-1-txt’-Permission-denied"><a href="#3）touch-cannot-touch-1-txt’-Permission-denied" class="headerlink" title="3）touch: cannot touch `1.txt’: Permission denied"></a>3）touch: cannot touch `1.txt’: Permission denied</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 /upload]<span class="comment"># touch 1.txt</span></span><br><span class="line">touch: cannot touch `1.txt<span class="string">': Permission denied</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">服务器端/data目录所属用户和用户组不对</span></span><br><span class="line"><span class="string">在服务器上</span></span><br><span class="line"><span class="string">chown nfsnobody.nfsnobody /data</span></span><br></pre></td></tr></table></figure><h4 id="4）-bash-showmount-command-not-found"><a href="#4）-bash-showmount-command-not-found" class="headerlink" title="4）-bash: showmount: command not found"></a>4）-bash: showmount: command not found</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@backup ~]<span class="comment"># showmount -e 10.0.0.24</span></span><br><span class="line">-bash: showmount: <span class="built_in">command</span> not found</span><br><span class="line"></span><br><span class="line">没有安装服务</span><br></pre></td></tr></table></figure><h4 id="5）mount-wrong-fs-type-bad-option-bad-superblock-on-10-0-0-24-data"><a href="#5）mount-wrong-fs-type-bad-option-bad-superblock-on-10-0-0-24-data" class="headerlink" title="5）mount: wrong fs type, bad option, bad superblock on 10.0.0.24:/data"></a>5）mount: wrong fs type, bad option, bad superblock on 10.0.0.24:/data</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@backup ~]<span class="comment"># mount -t nfs 10.0.0.24:/data /mnt</span></span><br><span class="line">mount: wrong fs <span class="built_in">type</span>, bad option, bad superblock on 10.0.0.24:/data,</span><br><span class="line">       missing codepage or helper program, or other error</span><br><span class="line">       (<span class="keyword">for</span> several filesystems (e.g. nfs, cifs) you might</span><br><span class="line">       need a /sbin/mount.&lt;<span class="built_in">type</span>&gt; helper program)</span><br><span class="line">       In some cases useful info is found <span class="keyword">in</span> syslog - try</span><br><span class="line">       dmesg | tail  or so</span><br><span class="line">没有安装NFS服务</span><br><span class="line">yum install nfs-utils –y</span><br></pre></td></tr></table></figure><h3 id="排错过程"><a href="#排错过程" class="headerlink" title="排错过程"></a>排错过程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、前提：NFS原理及部署过程</span><br><span class="line"></span><br><span class="line">2、先在客户端排查</span><br><span class="line">    1.ping server_ip</span><br><span class="line">    2.telnet server_ip 111  <span class="comment">#端口是否通，是否提供服务</span></span><br><span class="line">    3.showmount<span class="_">-e</span> server_ip  <span class="comment">#rpcinfo-p server_ip mount</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> nfs </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>17，备份--安装配置rsync</title>
      <link href="/2019/06/25/17%EF%BC%8C%E5%A4%87%E4%BB%BD--%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AErsync/"/>
      <url>/2019/06/25/17%EF%BC%8C%E5%A4%87%E4%BB%BD--%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AErsync/</url>
      <content type="html"><![CDATA[<h3 id="服务端安装配置rsync"><a href="#服务端安装配置rsync" class="headerlink" title="服务端安装配置rsync"></a>服务端安装配置rsync</h3><h4 id="查看rsync安装包"><a href="#查看rsync安装包" class="headerlink" title="查看rsync安装包"></a>查看rsync安装包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#我的安装系统的时候，就已经安装了rsync软件了，只需要配置就可以了</span></span><br><span class="line">rpm -qa rsync</span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line"><span class="comment">#yum install rsync -y</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#源码安装：</span></span><br><span class="line">rpm -e --nodeps rsync   <span class="comment">#卸载系统自带的rsync</span></span><br><span class="line">rpm -qa rsync</span><br><span class="line">wget https://download.samba.org/pub/rsync/src/rsync-3.1.3.tar.gz</span><br><span class="line"><span class="comment">#wget -O https://download.samba.org/pub/rsync/src/rsync-3.1.3.tar.gz ./rsync.tar.gz</span></span><br><span class="line"></span><br><span class="line">tar xf rsync-3.1.3.tar.gz</span><br><span class="line"><span class="built_in">cd</span> rsync-3.1.3</span><br><span class="line"></span><br><span class="line"><span class="comment">#./configure --prefix=/apps/rsync/</span></span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="添加rsync服务的用户，管理本地目录的"><a href="#添加rsync服务的用户，管理本地目录的" class="headerlink" title="添加rsync服务的用户，管理本地目录的"></a>添加rsync服务的用户，管理本地目录的</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd -s /sbin/nologin -M rsync</span><br><span class="line">id rsync</span><br></pre></td></tr></table></figure><h4 id="生成rsyncd-conf配置文件"><a href="#生成rsyncd-conf配置文件" class="headerlink" title="生成rsyncd.conf配置文件"></a>生成rsyncd.conf配置文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##rsyncd.conf start##</span></span><br><span class="line">uid = rsync                                       用户，远端的命令使用rsync访问共享目录</span><br><span class="line">gid = rsync                                       用户组</span><br><span class="line">use chroot = no                                    安全选项</span><br><span class="line">max connections = 200                              最大连接数</span><br><span class="line">timeout = 300                                      超时时间s</span><br><span class="line">pid file = /var/run/rsyncd.pid                          rsync进程对应的进程号文件</span><br><span class="line">lock file = /var/run/rsync.lock                         rsync的程序锁文件</span><br><span class="line"><span class="built_in">log</span> file = /var/<span class="built_in">log</span>/rsyncd.log                          rsync的日志 出错</span><br><span class="line">[oldboy]                                           模块名称</span><br><span class="line">path = /oldboy                                      服务器提供访问的目录</span><br><span class="line">ignore errors                                        忽略错误</span><br><span class="line"><span class="built_in">read</span> only = <span class="literal">false</span>                                       可读可写</span><br><span class="line">list = <span class="literal">false</span>                                            不允许列表</span><br><span class="line">hosts allow = 10.0.0.0/24                               允许的主机范围</span><br><span class="line">hosts deny = 0.0.0.0/32                                 拒绝的主机范围</span><br><span class="line">auth users = rsync_backup                               虚拟用户</span><br><span class="line">secrets file = /etc/rsync.password                      用户对应的密码文件</span><br><span class="line"><span class="comment">#rsync_config_______________end</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#rsync_config_______________start</span></span><br><span class="line"><span class="comment">#created by jo 2017-11-27</span></span><br><span class="line"><span class="comment">##rsyncd.conf start##</span></span><br><span class="line">uid = rsync</span><br><span class="line">gid = rsync</span><br><span class="line">use chroot = no</span><br><span class="line">max connections = 200</span><br><span class="line">timeout = 300</span><br><span class="line">pid file = /var/run/rsyncd.pid</span><br><span class="line">lock file = /var/run/rsync.lock</span><br><span class="line"><span class="built_in">log</span> file = /var/<span class="built_in">log</span>/rsyncd.log</span><br><span class="line">[backup]</span><br><span class="line">path = /backup</span><br><span class="line">ignore errors</span><br><span class="line"><span class="built_in">read</span> only = <span class="literal">false</span></span><br><span class="line">list = <span class="literal">false</span></span><br><span class="line">hosts allow = 172.16.1.0/24</span><br><span class="line">hosts deny = 0.0.0.0/32</span><br><span class="line">auth users = rsync_backup</span><br><span class="line">secrets file = /etc/rsync.password</span><br><span class="line"><span class="comment">#rsync_config_______________end</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#多模块配置</span></span><br><span class="line">cat &gt;/etc/rsyncd.conf&lt;&lt;EOF</span><br><span class="line"><span class="comment">#rsync_config_______________start</span></span><br><span class="line"><span class="comment">#created by jo 2018-07-27</span></span><br><span class="line"><span class="comment">##rsyncd.conf start##</span></span><br><span class="line">uid = rsync</span><br><span class="line">gid = rsync</span><br><span class="line">use chroot = no</span><br><span class="line">max connections = 200</span><br><span class="line">timeout = 300</span><br><span class="line">pid file = /var/run/rsyncd.pid</span><br><span class="line">lock file = /var/run/rsync.lock</span><br><span class="line"><span class="built_in">log</span> file = /var/<span class="built_in">log</span>/rsyncd.log</span><br><span class="line"><span class="comment">#提取到上面，让所有模块公用下面的配置</span></span><br><span class="line">ignore errors</span><br><span class="line"><span class="built_in">read</span> only = <span class="literal">false</span></span><br><span class="line">list = <span class="literal">false</span></span><br><span class="line">hosts allow = 172.16.1.0/24</span><br><span class="line"><span class="comment">#hosts allow和 hosts deny只保留一条</span></span><br><span class="line"><span class="comment">#hosts deny = 0.0.0.0/32</span></span><br><span class="line">auth users = rsync_backup</span><br><span class="line">secrets file = /etc/rsync.password</span><br><span class="line">[backup]</span><br><span class="line">path = /backup</span><br><span class="line">[nfsbackup]</span><br><span class="line">path = /nfsbackup</span><br><span class="line"><span class="comment">#rsync_config_______________end</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h4 id="根据rsyncd-conf的auth-users配置帐户，远程连接的。并根据secrets-file-参数生成密码文件"><a href="#根据rsyncd-conf的auth-users配置帐户，远程连接的。并根据secrets-file-参数生成密码文件" class="headerlink" title="根据rsyncd.conf的auth users配置帐户，远程连接的。并根据secrets file 参数生成密码文件"></a>根据rsyncd.conf的auth users配置帐户，远程连接的。并根据secrets file 参数生成密码文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"rsync_backup:123456"</span> &gt;/etc/rsync.password</span><br><span class="line">cat /etc/rsync.password</span><br></pre></td></tr></table></figure><h4 id="为密码文件配置权限"><a href="#为密码文件配置权限" class="headerlink" title="为密码文件配置权限"></a>为密码文件配置权限</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /etc/rsync.password</span><br><span class="line">ls -l /etc/rsync.password</span><br></pre></td></tr></table></figure><h4 id="创建共享的目录并授权rsync服务管理"><a href="#创建共享的目录并授权rsync服务管理" class="headerlink" title="创建共享的目录并授权rsync服务管理"></a>创建共享的目录并授权rsync服务管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /backup -p</span><br><span class="line">chown -R rsync.rsync /backup</span><br><span class="line">ls -ld /backup/</span><br><span class="line"><span class="comment">#如果没有/backup目录，就会chdir failed</span></span><br></pre></td></tr></table></figure><h4 id="启动rsync服务并检查"><a href="#启动rsync服务并检查" class="headerlink" title="启动rsync服务并检查"></a>启动rsync服务并检查</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rsync --daemon</span><br><span class="line">ps -ef | grep rsync |grep -v grep</span><br><span class="line">lsof -i :873</span><br><span class="line"><span class="comment">#或者用下面的命令，已知端口查看命令</span></span><br><span class="line">netstat -lntup|grep 873</span><br><span class="line">ss -lntup|grep 873</span><br></pre></td></tr></table></figure><h4 id="加入开机启动"><a href="#加入开机启动" class="headerlink" title="加入开机启动"></a>加入开机启动</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/rc.d/rc.local</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"/usr/bin/rsync --daemon"</span> &gt;&gt;/etc/rc.local</span><br><span class="line">tail -1 /etc/rc.local</span><br></pre></td></tr></table></figure><h4 id="排错"><a href="#排错" class="headerlink" title="排错"></a>排错</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1，输出结果</span><br><span class="line">2，日志tail /var/<span class="built_in">log</span>/rsyncd.log</span><br><span class="line">3，熟练部署过程（原理）</span><br></pre></td></tr></table></figure><h3 id="rsync客户端"><a href="#rsync客户端" class="headerlink" title="rsync客户端"></a>rsync客户端</h3><h4 id="生成连接服务器需要的密码文件"><a href="#生成连接服务器需要的密码文件" class="headerlink" title="生成连接服务器需要的密码文件"></a>生成连接服务器需要的密码文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"123456"</span> &gt;/etc/rsync.password</span><br><span class="line">cat /etc/rsync.password</span><br></pre></td></tr></table></figure><h4 id="为密码文件配置权限-1"><a href="#为密码文件配置权限-1" class="headerlink" title="为密码文件配置权限"></a>为密码文件配置权限</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod 600 /etc/rsync.password</span><br><span class="line">ls -l /etc/rsync.password</span><br></pre></td></tr></table></figure><h4 id="同步文件"><a href="#同步文件" class="headerlink" title="同步文件"></a>同步文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#推送</span></span><br><span class="line">rsync -avz /tmp/ rsync_backup@172.16.1.41::backup/ --password-file=/etc/rsync.password</span><br><span class="line">rsync -avz /tmp/ rsync://rsync_backup@172.16.1.41/backup/ --password-file=/etc/rsync.password</span><br><span class="line"></span><br><span class="line"><span class="comment">#拉取：</span></span><br><span class="line">rsync -avz rsync_backup@172.16.1.41::backup /tmp/ --password-file=/etc/rsync.password</span><br><span class="line">rsync -avz rsync://rsync_backup@172.16.1.41/backup /tmp/ --password-file=/etc/rsync.password</span><br><span class="line"></span><br><span class="line">说明：注意/dir01/表示目录下的所有内容 /dir01表示的目录本身</span><br><span class="line">此例子是拷贝目录下的内容所以要加上/dir01/如果是要将/dir01整个目录拷贝到/dir02下，那么就要写/dir01  ---&gt;注意后面没有/</span><br><span class="line">1，目录后有/，复制目录下的内容</span><br><span class="line">2，目录后没有/，复制目录和目录下的内容</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 本地yum源 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>16，下载yum源的rpm，为本地搭建yum源做准备</title>
      <link href="/2019/06/21/16%EF%BC%8C%E4%B8%8B%E8%BD%BDyum%E6%BA%90%E7%9A%84rpm%EF%BC%8C%E4%B8%BA%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BAyum%E6%BA%90%E5%81%9A%E5%87%86%E5%A4%87/"/>
      <url>/2019/06/21/16%EF%BC%8C%E4%B8%8B%E8%BD%BDyum%E6%BA%90%E7%9A%84rpm%EF%BC%8C%E4%B8%BA%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BAyum%E6%BA%90%E5%81%9A%E5%87%86%E5%A4%87/</url>
      <content type="html"><![CDATA[<h3 id="整体下载yum源的rpm"><a href="#整体下载yum源的rpm" class="headerlink" title="整体下载yum源的rpm"></a>整体下载yum源的rpm</h3><h4 id="整体下载阿里云的yum源"><a href="#整体下载阿里云的yum源" class="headerlink" title="整体下载阿里云的yum源"></a>整体下载阿里云的yum源</h4><p>阿里云的yum源下载速度很快，我一直都是用的阿里云的yum源。所有这里就用阿里云的yum源。除了阿里云的源，清华大学的源也不错。由于整理这篇博客的时候没有网络，所有就不贴网址了。</p><h4 id="安装必要的软件包"><a href="#安装必要的软件包" class="headerlink" title="安装必要的软件包"></a>安装必要的软件包</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install yum-utils createrepo -y</span><br></pre></td></tr></table></figure><h4 id="刷新yum源的缓存"><a href="#刷新yum源的缓存" class="headerlink" title="刷新yum源的缓存"></a>刷新yum源的缓存</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all</span><br><span class="line">yum repolist</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="整体下载yum源"><a href="#整体下载yum源" class="headerlink" title="整体下载yum源"></a>整体下载yum源</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /centos7</span><br><span class="line"><span class="built_in">cd</span> /centos7</span><br><span class="line">reposync -n -r base</span><br><span class="line"><span class="comment">#使用reposync下载时，会自动建立base目录</span></span><br></pre></td></tr></table></figure><p>这里举例只用了一个base仓库，下载其它仓库也是一样的方法。</p><h4 id="建立索引"><a href="#建立索引" class="headerlink" title="建立索引"></a>建立索引</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /centos7/base</span><br><span class="line">createrepo .</span><br><span class="line"><span class="comment">#由于包比较多，建立索引的时间会比较长，请耐心等待。</span></span><br></pre></td></tr></table></figure><p>建立完索引之后就可以配置本地yum源了</p>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 本地yum源 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>15，centos7配置本地yum源</title>
      <link href="/2019/06/21/15%EF%BC%8Ccentos7%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0yum%E6%BA%90/"/>
      <url>/2019/06/21/15%EF%BC%8Ccentos7%E9%85%8D%E7%BD%AE%E6%9C%AC%E5%9C%B0yum%E6%BA%90/</url>
      <content type="html"><![CDATA[<h3 id="centos7配置本地yum源"><a href="#centos7配置本地yum源" class="headerlink" title="centos7配置本地yum源"></a>centos7配置本地yum源</h3><h4 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h4><p>我下载好了一些依赖，打了一下zip包。由于现在没有网络，等有网络了，再上传到网上。<br>两个文件：dependencies.zip   nginx-1.16.0.tar.gz</p><p>这里安装nginx 1.16.0 版本，这也是之前下载的.</p><p>解压dependencies.zip文件，里面有个install.sh文件，执行它可以按顺序安装依赖包。<br>安装完依赖包之后，安装nginx.</p><p>链接：<a href="https://pan.baidu.com/s/15OXfxuOek7uGxrFc1r6EMQ" target="_blank" rel="noopener">https://pan.baidu.com/s/15OXfxuOek7uGxrFc1r6EMQ</a><br>提取码：cz84 </p><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">useradd -s /sbin/nologin -u 1888 -M www</span><br><span class="line"></span><br><span class="line">tar xf nginx-1.16.0.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> nginx-1.16.0</span><br><span class="line"></span><br><span class="line">./configure --user=www --group=www --with-http_ssl_module --with-http_stub_status_module  --prefix=/application/nginx-1.16.0/</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">ln -s /application/nginx-1.16.0/ /application/nginx</span><br><span class="line">ln -s /application/nginx/sbin/nginx /usr/bin/nginx</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'/application/nginx/sbin/nginx'</span> &gt;&gt; /etc/rc.local</span><br><span class="line"></span><br><span class="line"><span class="comment">#启动nginx</span></span><br><span class="line">nginx </span><br><span class="line"></span><br><span class="line"><span class="comment">#检查，重新加载配置文件</span></span><br><span class="line">nginx -t</span><br><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure><h4 id="配置nginx"><a href="#配置nginx" class="headerlink" title="配置nginx"></a>配置nginx</h4><p>我用的vmware,共享主机上的文件夹。要先安装vmware-tools，然后才可以做文件夹共享。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  10.0.0.222;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /mnt/hgfs/centos7;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>改完了配置文件，记得执行 nginx -s reload ,重新加载nginx的配置文件</p><h4 id="配置yum源"><a href="#配置yum源" class="headerlink" title="配置yum源"></a>配置yum源</h4><blockquote><p>1,把/etc/yum.repo.d/目录下的所有的文件都移动到/tmp下<br> 　mv /etc/yum.repo.d/* /tmp/<br>2,在/etc/yum.repo.d/目录下添加一个文件1.repo,内容如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[mybase]</span><br><span class="line">name=mybase</span><br><span class="line">baseurl=http://10.0.0.222/base</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br><span class="line"></span><br><span class="line">[myepel]</span><br><span class="line">name=myepel</span><br><span class="line">baseurl=http://10.0.0.222/epel</span><br><span class="line">failovermethod=priority</span><br><span class="line">enabled=1</span><br><span class="line">gpgcheck=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-7</span><br></pre></td></tr></table></figure></p></blockquote><h4 id="刷新yum缓存"><a href="#刷新yum缓存" class="headerlink" title="刷新yum缓存"></a>刷新yum缓存</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum clean all <span class="comment"># 清除缓存  </span></span><br><span class="line">yum repolist  <span class="comment"># 重新建立缓存</span></span><br></pre></td></tr></table></figure><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><blockquote><p>本篇中需要注意的地方是，离线安装依赖包。<br>因为我这前就把yum源里的安装包都下载了，并且也都建立了索引，所有就没有提及这一部分的内容。<br>我将在下一篇中来说明，如何下载阿里云yum源rpm包,如何建立索引。<br>由于yum源中文件太多，占用太大，我在这里就不提供了，请读者自行下载。</p></blockquote>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 本地yum源 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>14，CentOS7优化</title>
      <link href="/2019/06/21/14%EF%BC%8CCentOS7%E4%BC%98%E5%8C%96/"/>
      <url>/2019/06/21/14%EF%BC%8CCentOS7%E4%BC%98%E5%8C%96/</url>
      <content type="html"><![CDATA[<h3 id="CentOS7优化"><a href="#CentOS7优化" class="headerlink" title="CentOS7优化"></a>CentOS7优化</h3><h4 id="1，关闭selinux"><a href="#1，关闭selinux" class="headerlink" title="1，关闭selinux"></a>1，关闭selinux</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">'s#SELINUX=enforcing#SELINUX=disabled#g'</span> /etc/selinux/config</span><br><span class="line">grep SELINUX=disabled /etc/selinux/config</span><br><span class="line">setenforce 0</span><br><span class="line">getenforce</span><br></pre></td></tr></table></figure><h4 id="2，关闭iptables"><a href="#2，关闭iptables" class="headerlink" title="2，关闭iptables"></a>2，关闭iptables</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/iptables stop</span><br><span class="line">/etc/init.d/iptables stop</span><br><span class="line">chkconfig iptables off</span><br><span class="line"></span><br><span class="line"><span class="comment">#centos7</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"></span><br><span class="line"><span class="comment">#克隆虚拟机后，可能会出现无法上网的情况，可执行下面的命令，重启后解决</span></span><br><span class="line">systemctl stop NetworkManager</span><br><span class="line">systemctl <span class="built_in">disable</span> NetworkManager</span><br></pre></td></tr></table></figure><a id="more"></a><h4 id="3，精简开机自启动服务"><a href="#3，精简开机自启动服务" class="headerlink" title="3，精简开机自启动服务"></a>3，精简开机自启动服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#centos 6</span></span><br><span class="line">chkconfig | egrep -v <span class="string">"crond|sshd|network|rsyslog|sysstat"</span>|awk <span class="string">'&#123;print "chkconfig",$1,"off"&#125;'</span>|bash</span><br><span class="line"><span class="built_in">export</span> LANG=en</span><br><span class="line">chkconfig --list | grep 3:on</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#centos 7</span></span><br><span class="line">ser=(abrt-ccpp.service abrt-oops.service abrt-vmcore.service abrt-xorg.service abrtd.service atd.service auditd.service chronyd.service kdump.service lvm2-monitor.service mdmonitor.service microcode.service lvm2-lvmetad.socket lvm2-lvmpolld.socket postfix.service NetworkManager.service);<span class="keyword">for</span> i <span class="keyword">in</span> <span class="variable">$&#123;ser[@]&#125;</span>;<span class="keyword">do</span> systemctl stop <span class="variable">$i</span>; systemctl <span class="built_in">disable</span> <span class="variable">$i</span>;<span class="keyword">done</span>;</span><br></pre></td></tr></table></figure><h4 id="4，提权oldboy可以sudo"><a href="#4，提权oldboy可以sudo" class="headerlink" title="4，提权oldboy可以sudo"></a>4，提权oldboy可以sudo</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">useradd oldboy</span><br><span class="line">\cp /etc/sudoers /etc/sudoers.ori</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"oldboy ALL=(ALL) NOPASSWD:ALL "</span> &gt;&gt;/etc/sudoers</span><br><span class="line">tail -1 /etc/sudoers</span><br><span class="line">visudo -c</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#================</span></span><br><span class="line">useradd totar_jonah</span><br><span class="line"><span class="built_in">echo</span> 123456|passwd --stdin totar_jonah</span><br><span class="line">\cp /etc/sudoers /etc/sudoers.ori</span><br><span class="line"><span class="built_in">echo</span> <span class="string">" totar_jonah ALL=(ALL) NOPASSWD:ALL "</span> &gt;&gt;/etc/sudoers</span><br><span class="line">tail -1 /etc/sudoers</span><br><span class="line">visudo -c</span><br></pre></td></tr></table></figure><h4 id="5，中文字符集"><a href="#5，中文字符集" class="headerlink" title="5，中文字符集"></a>5，中文字符集</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#centos 6</span></span><br><span class="line">cp /etc/sysconfig/i18n /etc/sysconfig/i18n.ori</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'LANG="zh_CN.UTF-8"'</span> &gt;/etc/sysconfig/i18n</span><br><span class="line"><span class="built_in">source</span> /etc/sysconfig/i18n</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$LANG</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#centos7</span></span><br><span class="line">cp /etc/locale.conf&#123;,.bak&#125;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'LANG="zh_CN.UTF-8"'</span> &gt;/etc/locale.conf</span><br><span class="line"><span class="built_in">source</span> /etc/locale.conf</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$LANG</span></span><br></pre></td></tr></table></figure><h4 id="6，时间同步"><a href="#6，时间同步" class="headerlink" title="6，时间同步"></a>6，时间同步</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'#time sync by jo at 2019-04-16'</span> &gt;&gt; /var/spool/cron/root</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'*/5 * * * * /usr/sbin/ntpupdate ntp1.aliyun.com &gt;/dev/null 2&gt;&amp;1'</span> &gt;&gt;/var/spool/cron/root</span><br><span class="line">crontab -l</span><br></pre></td></tr></table></figure><h4 id="7，命令行安全"><a href="#7，命令行安全" class="headerlink" title="7，命令行安全"></a>7，命令行安全</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'export TMOUT=300'</span> &gt;&gt;/etc/profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export HISTSIZE=5'</span> &gt;&gt;/etc/profile</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'export HISTFILESIZE=5'</span> &gt;&gt;/etc/profile</span><br><span class="line">tail -3 /etc/profile</span><br><span class="line">.  /etc/profile</span><br></pre></td></tr></table></figure><h4 id="8，加大文件描述"><a href="#8，加大文件描述" class="headerlink" title="8，加大文件描述"></a>8，加大文件描述</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'* - nofile 65535'</span> &gt;&gt;/etc/security/limits.conf</span><br><span class="line"></span><br><span class="line">tail -1 /etc/security/limits.conf</span><br></pre></td></tr></table></figure><h4 id="9，内核优化"><a href="#9，内核优化" class="headerlink" title="9，内核优化"></a>9，内核优化</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt;/etc/sysctl.conf&lt;&lt;EOF</span><br><span class="line">net.ipv4.tcp_fin_timeout = 2</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line">net.ipv4.tcp_tw_recycle = 1</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line">net.ipv4.tcp_keepalive_time = 600</span><br><span class="line">net.ipv4.ip_local_port_range = 4000    65000</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 16384</span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 36000</span><br><span class="line">net.ipv4.route.gc_timeout = 100</span><br><span class="line">net.ipv4.tcp_syn_retries = 1</span><br><span class="line">net.ipv4.tcp_synack_retries = 1</span><br><span class="line">net.core.somaxconn = 16384</span><br><span class="line">net.core.netdev_max_backlog = 16384</span><br><span class="line">net.ipv4.tcp_max_orphans = 16384</span><br><span class="line"><span class="comment">#以下参数是对iptables防火墙的优化，防火墙不开会提示，可以忽略不理。</span></span><br><span class="line">net.nf_conntrack_max = 25000000</span><br><span class="line">net.netfilter.nf_conntrack_max =25000000</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_established= 180</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_time_wait= 120</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_close_wait= 60</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_fin_wait= 120</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h4 id="10，yum-repo-优化"><a href="#10，yum-repo-优化" class="headerlink" title="10，yum/repo 优化"></a>10，yum/repo 优化</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.bak</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"><span class="comment">#wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centsos-7.repo</span></span><br><span class="line"></span><br><span class="line">mv /etc/yum.repos.d/epel.repo /etc/yum.repos.d/epel.repo.bak</span><br><span class="line"><span class="comment">#wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span></span><br><span class="line">curl -o /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo</span><br></pre></td></tr></table></figure><h4 id="11，命令补全"><a href="#11，命令补全" class="headerlink" title="11，命令补全"></a>11，命令补全</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install bash-completion wget tree htop lrzsz vim  -y</span><br></pre></td></tr></table></figure><h4 id="12，终端提示符高亮并且显示全路径"><a href="#12，终端提示符高亮并且显示全路径" class="headerlink" title="12，终端提示符高亮并且显示全路径"></a>12，终端提示符高亮并且显示全路径</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'PS1="\e[1;32m\][\u@\h \w]\\$\[\e[m\] "'</span> &gt;&gt; ~/.bashrc</span><br><span class="line">. ~/.bashrc</span><br><span class="line"></span><br><span class="line"><span class="comment">#提示符使用全路径</span></span><br><span class="line"><span class="comment">#sed -i -r 's#(.*PS1=\"\[\\u\@\\h \\)W(\]\\\\\$ \")#\1\w\2#g' /etc/bashrc</span></span><br></pre></td></tr></table></figure><h4 id="13，ssh端口修改，禁止root直接登陆"><a href="#13，ssh端口修改，禁止root直接登陆" class="headerlink" title="13，ssh端口修改，禁止root直接登陆"></a>13，ssh端口修改，禁止root直接登陆</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#sed -i 's@#UseDNS yes@UseDNS no@g;s@^GSSAPIAuthentication yes@GSSAPIAuthentication no@g' /etc/ssh/sshd_config</span></span><br><span class="line"><span class="comment"># 禁止root远程登录</span></span><br><span class="line">sed -i <span class="string">'s@#PermitRootLogin yes@PermitRootLogin no@'</span> /etc/ssh/sshd_config</span><br><span class="line"><span class="comment"># 禁止空密码登录</span></span><br><span class="line">sed -i <span class="string">'s@#PermitEmptyPasswords no@PermitEmptyPasswords no@'</span> /etc/ssh/sshd_config</span><br><span class="line">systemctl restart sshd.service</span><br><span class="line"><span class="comment">#禁止密码登陆</span></span><br><span class="line"><span class="comment">#sed -i 's@#   PasswordAuthentication yes@ PasswordAuthentication no@' /etc/ssh/sshd_config</span></span><br><span class="line"></span><br><span class="line">PermitRootLogin no</span><br><span class="line">PermitEmptyPasswords no</span><br><span class="line">Port 33122</span><br></pre></td></tr></table></figure><h4 id="14，普通用户使用ssh密钥登陆"><a href="#14，普通用户使用ssh密钥登陆" class="headerlink" title="14，普通用户使用ssh密钥登陆"></a>14，普通用户使用ssh密钥登陆</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sudo ssh-keygen -t rsa -C <span class="string">"jonah222@qq.com"</span></span><br><span class="line">mkdir .ssh</span><br><span class="line">touch .ssh/authorized_keys</span><br><span class="line">sudo cat /root/.ssh/id_rsa.pub &gt; ~/.ssh/authorized_keys</span><br><span class="line">chmod 700  ~/.ssh</span><br><span class="line">chmod 600  ~/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line"><span class="comment">#cat "PubkeyAuthentication yes" &gt;&gt;/etc/ssh/sshd_config</span></span><br><span class="line"><span class="comment">#基于密钥认证的配置</span></span><br><span class="line"><span class="comment"># vi /etc/ssh/sshd_config  </span></span><br><span class="line">PasswordAuthentication no <span class="comment">#禁止使用基于口令认证的方式登陆</span></span><br><span class="line">PubkeyAuthentication yes <span class="comment">#允许使用基于密钥认证的方式登陆</span></span><br></pre></td></tr></table></figure><h4 id="小结：如何优化linux："><a href="#小结：如何优化linux：" class="headerlink" title="小结：如何优化linux："></a>小结：如何优化linux：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">1、关闭SElinux</span><br><span class="line">2、关闭防火墙，设定运行级别为3.</span><br><span class="line">3、精简开机自启动服务</span><br><span class="line">4、SSH安全控制（提前建立普通用户）</span><br><span class="line">5、sudo 管理用户授权</span><br><span class="line">6、调整文件描述符</span><br><span class="line">7、更改合适的字符集</span><br><span class="line">8、锁定关键系统文件</span><br><span class="line">9、禁止显示内核版本及系统版本信息</span><br><span class="line">10、设置会话的超时时间及历史记录数</span><br><span class="line">11、禁止PING</span><br><span class="line">12、优化LINUX内核参数</span><br><span class="line">13、特定漏洞yum/rpm升级</span><br><span class="line">14、清楚多余的系统虚拟账号</span><br><span class="line">15、服务器时间同步</span><br><span class="line">16、打补丁下载软件调整为国内的下载地址（调整yum源）</span><br><span class="line">17、定时清理邮件服务临时目录垃圾文件</span><br><span class="line">18、为grub菜单加密码</span><br></pre></td></tr></table></figure><h4 id="总结：阿里云的坑"><a href="#总结：阿里云的坑" class="headerlink" title="总结：阿里云的坑"></a>总结：阿里云的坑</h4><blockquote><p>1，无法修改sshd的端口，在阿里的安全组中，sshd的端口只能是22。<br>2，ssh的配置文件不要改错了，sshd_config才是sshd服务的配置文件，不是ssh_config</p></blockquote>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 优化 </tag>
            
            <tag> 安装 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>13，CentOS7安装</title>
      <link href="/2019/06/19/13%EF%BC%8CCentOS7%E5%AE%89%E8%A3%85/"/>
      <url>/2019/06/19/13%EF%BC%8CCentOS7%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h3 id="Centos-7-安装"><a href="#Centos-7-安装" class="headerlink" title="Centos 7 安装"></a>Centos 7 安装</h3><p>好久没有安装centos7 都有点忘记了。现在有点时间，所以就来回顾一下。我用的vmware虚拟机来安装的。所有，首先新建虚拟机。新建虚拟机的过程在这里就不再细说了，在这里只提一下，新建的时候要再添加一张网卡，一共有两张网卡，一张网卡是NAT模式，一张网卡使用LAN区段。</p><h4 id="修改内核参数"><a href="#修改内核参数" class="headerlink" title="修改内核参数"></a>修改内核参数</h4><p>启动时修改内核参数<br>选择安装界面中，按下TAB键，出现内核参数，在内核参数最后面，加个空格，再加上下面的参数。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ifnames=0 biosdevname=0</span><br></pre></td></tr></table></figure></p><a id="more"></a><h4 id="网卡配置"><a href="#网卡配置" class="headerlink" title="网卡配置"></a>网卡配置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1，选择开机自动运行   </span><br><span class="line">2，ipv4配置  10.0.0.201  24  10.0.0.254 DNS：223.6.6.6</span><br><span class="line">              172.16.1.201   24</span><br></pre></td></tr></table></figure><h4 id="最小化安装，并选择软件包"><a href="#最小化安装，并选择软件包" class="headerlink" title="最小化安装，并选择软件包"></a>最小化安装，并选择软件包</h4><p>软件包选择最小化安装中的第 1 ，2，3个软件包，分别是：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Debugging Tools</span><br><span class="line">Compatibility Libraries</span><br><span class="line">Development Tools</span><br></pre></td></tr></table></figure></p><h4 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h4><p>进入分区，选择“I will configure partitioning”</p><h5 id="一般分区推荐"><a href="#一般分区推荐" class="headerlink" title="一般分区推荐"></a>一般分区推荐</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/boot 1G</span><br><span class="line">swap 1G (内存的1-1.5倍，内存大于等于8G,就给8G)</span><br><span class="line">/     8.5G (剩多少，给多少)</span><br></pre></td></tr></table></figure><h5 id="硬盘比较大"><a href="#硬盘比较大" class="headerlink" title="硬盘比较大"></a>硬盘比较大</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/boot 1G</span><br><span class="line">swap 1G</span><br><span class="line">/     50-200G</span><br><span class="line">剩下的不分，留着以后用</span><br></pre></td></tr></table></figure><h5 id="数据库服务器分区"><a href="#数据库服务器分区" class="headerlink" title="数据库服务器分区"></a>数据库服务器分区</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/boot 1G</span><br><span class="line">swap 1G</span><br><span class="line">/     50-200G</span><br><span class="line">/data  剩下的都分给数据分区</span><br></pre></td></tr></table></figure><h4 id="kdump-selinux"><a href="#kdump-selinux" class="headerlink" title="kdump  selinux"></a>kdump  selinux</h4><p>这两个选项都disable</p>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 安装 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>12，docker的常用命令</title>
      <link href="/2019/02/25/12%EF%BC%8Cdocker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/02/25/12%EF%BC%8Cdocker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<p>docker的常用命令</p><ul><li>1、查看docker版本信息<br>docker version<br>查看客户端的信息，并通过socket查询服务端的信息。</li><li>2、查看docker信息<br>docker info<br>查看docker的汇总信息。<br>3、查看镜像列表<br>docker images<br>4、查看所有的镜像包括过程镜像<br>docker images -a<a id="more"></a>5、显示完整的镜像ID<br>docker images –no-trunc<br>6、只显示镜像ID<br>docker images –no-trunc -q<br>7、pull镜像<br>docker pull centos:7.6.1810<br>8、pull所有标签的镜像<br>docker pull centos<br>9、查看运行中的容器<br>docker ps<br>10、列出所有有容器（包含停止的容器）<br>docker ps -a<br>11、显示容器大小<br>docker ps -a -s<br>12、仅列出最新创建的一个容器<br>docker ps -l<br>13、仅列出最新创建的n个容器<br>docker ps n=2<br>14、仅列出容器ID<br>docker ps -q<br>15、显示完整的容器ID<br>docker ps -q –no-trunc<br>16、删除镜像<br>docker rmi centos:7.6.1810<br>17、强制删除镜像<br>docker rmi -f centos:7.6.1810<br>也可以直接指定镜像ID进行删除。<br>18、不移除该镜像的过程镜像，默认移除。<br>docker rmi nginx:latest –no-prune<br>19、删除容器<br>docekr rm 154fe4e6a0c6<br>20、 强行移除该容器，即使其正在运行<br>docker rm -f 154fe4e6a0c6<br>21、移除与容器关联的空间<br>docker rm -v 154fe4e6a0c6<br>22、查看指定镜像的创建历史<br>docker history centos:latest<br>23、完整显示镜像历史<br>docker history centos:latest –no-trunc<br>24、启动、停止和重启一个或多个指定容器。（多个容器就空格添加多个容器ID即可）<br>docker start 154fe4e6a0c6<br>docker stop 154fe4e6a0c6<br>docker restart 154fe4e6a0c6<br>25、启动之后并进入一个标准输入输出终端<br>docker start -a 154fe4e6a0c6<br>26、交互式启动<br>docker start -i 154fe4e6a0c6<br>27、停止的时候，超时就强制杀掉<br>docker stop 154fe4e6a0c6 -t 2<br>docker restart 154fe4e6a0c6 -t 2<br>28、从镜像启动容器<br>docker run -itd centos:7.6.1810<br>29、暂停某一容器的所有进程<br>docker pause 154fe4e6a0c6<br>30、恢复某一容器的所有进程<br>docker unpause 154fe4e6a0c6</li></ul><p>31、查看镜像的标准输出<br>docker logs 154fe4e6a0c6 -f<br>32、仅列出最新10条容器日志。<br>docker logs 154fe4e6a0c6 –tail=”10”<br>33、给镜像打上新的标签<br>docker tag centos:7.6.1810 centos:761810<br>34、杀死一个或多个指定容器进程<br>docker kill 154fe4e6a0c6<br>35、将指定镜像保存成 tar 归档文件， docker load 的逆操作。<br>docker save -o “centos.tar”<br>或者<br>docker save &gt; “centos.tar”<br>36、从 tar 镜像归档中载入镜像， docker save 的逆操作。<br>docker load -i centos.tar<br>或者<br>docker load &lt; centos.tar<br>37、导出容器<br>docker export 154fe4e6a0c6 -o export.tar<br>或者<br>docker export 154fe4e6a0c6 &gt; export.tar<br>38、导入容器tar文件到镜像<br>docker import -i export.tar<br>或者<br>docker import &lt; export.tar<br>39、查看一个正在运行容器进程，支持 ps 命令参数。<br>docker top 154fe4e6a0c6 -auxfww<br>40、按步骤输入在 Docker Hub 注册的用户名、密码和邮箱即可完成登录<br>docker login<br>41、运行后从指定服务器登出，默认为官方服务器。<br>docker logout<br>42、启动设置容器主机名<br>docker run -itd –hostname=centos7 centos:latest<br>43、启动挂载本地目录到容器里面<br>docker run -itd -v /data/centos7:/data centos:latest<br>/data/centos7是物理目录，/data是容器里面的目录<br>44、启动时指定dns，如果不指定是跟物理机是一致的<br>docker run -itd –dns 8.8.8.8 centos:latest<br>45、查找镜像站的镜像<br>docker search centos</p>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 优化 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>11，克隆完成虚拟机，修改主机名和ip</title>
      <link href="/2019/02/17/11%EF%BC%8C%E5%85%8B%E9%9A%86%E5%AE%8C%E6%88%90%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8Cip/"/>
      <url>/2019/02/17/11%EF%BC%8C%E5%85%8B%E9%9A%86%E5%AE%8C%E6%88%90%E8%99%9A%E6%8B%9F%E6%9C%BA%EF%BC%8C%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D%E5%92%8Cip/</url>
      <content type="html"><![CDATA[<h2 id="Centos-6"><a href="#Centos-6" class="headerlink" title="Centos 6"></a>Centos 6</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip=77;name=ldapserver;</span><br><span class="line">sed -i <span class="string">'/IPADDR/s#200$#'</span><span class="string">"<span class="variable">$ip</span>"</span><span class="string">'#g'</span> /etc/sysconfig/network-scripts/ifcfg-eth*</span><br><span class="line">sed -i <span class="string">'s#oldboy-muban#'</span><span class="string">"<span class="variable">$name</span>"</span><span class="string">'#g'</span> /etc/sysconfig/network</span><br></pre></td></tr></table></figure><h2 id="Centos-7"><a href="#Centos-7" class="headerlink" title="Centos 7"></a>Centos 7</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ip=111;name=docker;</span><br><span class="line">sed -i <span class="string">'/IPADDR/s#222$#'</span><span class="string">"<span class="variable">$ip</span>"</span><span class="string">'#g'</span> /etc/sysconfig/network-scripts/ifcfg-eth*</span><br><span class="line"><span class="comment">#sed -i 's#centos7-muban#'"$name"'#g' /etc/hostname</span></span><br><span class="line">hostnamectl <span class="built_in">set</span>-hostname <span class="variable">$name</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 优化 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>10，word手动换行符替换为段落标记</title>
      <link href="/2019/02/11/10%EF%BC%8Cword%E6%89%8B%E5%8A%A8%E6%8D%A2%E8%A1%8C%E7%AC%A6%E6%9B%BF%E6%8D%A2%E4%B8%BA%E6%AE%B5%E8%90%BD%E6%A0%87%E8%AE%B0/"/>
      <url>/2019/02/11/10%EF%BC%8Cword%E6%89%8B%E5%8A%A8%E6%8D%A2%E8%A1%8C%E7%AC%A6%E6%9B%BF%E6%8D%A2%E4%B8%BA%E6%AE%B5%E8%90%BD%E6%A0%87%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h1 id="word手动换行符替换为段落标记"><a href="#word手动换行符替换为段落标记" class="headerlink" title="word手动换行符替换为段落标记"></a>word手动换行符替换为段落标记</h1><blockquote><p>word中的手动换行符是用shift+enter打出的，一个向下的箭头符号。搜索中用符号（^l）表示（line）。<br>word中的段落标记是按回车（enter）打出来的.搜索中用符号（^p）表示（paragraph）。<br>在替换的特殊格式中可以找到“手动换行符”和“段落标记”。</p></blockquote>]]></content>
      
      <categories>
          
          <category> word </category>
          
      </categories>
      
      
        <tags>
            
            <tag> word </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>9，案例：网站迁移</title>
      <link href="/2018/12/23/9%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%BF%81%E7%A7%BB%E7%BD%91%E7%AB%99/"/>
      <url>/2018/12/23/9%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%E8%BF%81%E7%A7%BB%E7%BD%91%E7%AB%99/</url>
      <content type="html"><![CDATA[<h1 id="一次网站迁移故障及分析"><a href="#一次网站迁移故障及分析" class="headerlink" title="一次网站迁移故障及分析"></a>一次网站迁移故障及分析</h1><p><a href="http://blog.51cto.com/lxshopping/1574929" target="_blank" rel="noopener">http://blog.51cto.com/lxshopping/1574929</a></p><h2 id="迁移流程应该是"><a href="#迁移流程应该是" class="headerlink" title="迁移流程应该是:"></a>迁移流程应该是:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1.暂停原服务器数据库，导出相关数据库</span><br><span class="line"></span><br><span class="line">2.将导出的数据库同步到杭州xx服务器上面并导入到数据库中</span><br><span class="line"></span><br><span class="line">3.对xx服务器进行压力测试及用户登录测试</span><br><span class="line"></span><br><span class="line">4.回滚方案，出现问题及时回滚到原服务器，保证用户正常访问</span><br><span class="line"></span><br><span class="line">5.切换域名指向到xx服务器</span><br><span class="line"></span><br><span class="line">6.原服务器上面做301跳转到xx服务器（保证不写入新数据到原运营服务器上面）</span><br><span class="line"></span><br><span class="line">7.运营协助测试新服务器数据是否正常</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> 案例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> 网站迁移 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>8，kernel:nf_conntrack:table full,dropping packet.什么问题?如何解决?</title>
      <link href="/2018/12/23/8%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%20tables%20full/"/>
      <url>/2018/12/23/8%EF%BC%8C%E6%A1%88%E4%BE%8B%EF%BC%9A%20tables%20full/</url>
      <content type="html"><![CDATA[<p>#企业案例</p><blockquote><p>/var/log/messages 出现kernel:nf_conntrack:table full,dropping packet.什么问题?如何解决?</p></blockquote><p>##解答:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#上述结果会让业务访问很慢!</span></span><br><span class="line"><span class="comment">#下面是针对iptables的优化</span></span><br><span class="line">net.nf_conntrack_max = 25000000</span><br><span class="line">net.netfilter.nf_conntrack_max = 25000000</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_established = 180</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_time_wait = 120</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_close_wait = 60</span><br><span class="line">net.netfilter.nf_conntrack_tcp_timeout_fin_wait = 120</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> 案例 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> iptables </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>7，150+命令</title>
      <link href="/2018/09/05/7%EF%BC%8C150+%E5%91%BD%E4%BB%A4/"/>
      <url>/2018/09/05/7%EF%BC%8C150+%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<h1 id="命令-功能说明"><a href="#命令-功能说明" class="headerlink" title="命令 功能说明"></a>命令 功能说明</h1><h2 id="线上查询及帮助命令-2个"><a href="#线上查询及帮助命令-2个" class="headerlink" title="线上查询及帮助命令(2个)"></a>线上查询及帮助命令(2个)<code></code></h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">man查看命令帮助，命令的词典，更复杂的还有info，但不常用。</span><br><span class="line">help查看Linux内置命令的帮助，比如cd命令。</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="文件和目录操作命令-18个"><a href="#文件和目录操作命令-18个" class="headerlink" title="文件和目录操作命令(18个)"></a>文件和目录操作命令(18个)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ls全拼list，功能是列出目录的内容及其内容属性信息。</span><br><span class="line">cd全拼change directory，功能是从当前工作目录切换到指定的工作目录。</span><br><span class="line">cp全拼copy，其功能为复制文件或目录。</span><br><span class="line">find查找的意思，用于查找目录及目录下的文件。</span><br><span class="line">mkdir全拼make directories，其功能是创建目录。</span><br><span class="line">mv全拼move，其功能是移动或重命名文件。</span><br><span class="line">pwd全拼print working directory，其功能是显示当前工作目录的绝对路径。</span><br><span class="line">rename用于重命名文件。</span><br><span class="line">rm全拼remove，其功能是删除一个或多个文件或目录。</span><br><span class="line">rmdir全拼remove empty directories，功能是删除空目录。</span><br><span class="line">touch创建新的空文件，改变已有文件的时间戳属性。</span><br><span class="line">tree功能是以树形结构显示目录下的内容。</span><br><span class="line">basename显示文件名或目录名。</span><br><span class="line">dirname显示文件或目录路径。</span><br><span class="line">chattr改变文件的扩展属性。</span><br><span class="line">lsattr查看文件扩展属性。</span><br><span class="line">file显示文件的类型。</span><br><span class="line">md5sum计算和校验文件的MD5值。</span><br></pre></td></tr></table></figure><h2 id="查看文件及内容处理命令（21个）"><a href="#查看文件及内容处理命令（21个）" class="headerlink" title="查看文件及内容处理命令（21个）"></a>查看文件及内容处理命令（21个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cat全拼concatenate，功能是用于连接多个文件并且打印到屏幕输出或重定向到指定文件中。</span><br><span class="line">tactac是cat的反向拼写，因此命令的功能为反向显示文件内容。</span><br><span class="line">more分页显示文件内容。</span><br><span class="line">less分页显示文件内容，more命令的相反用法。</span><br><span class="line">head显示文件内容的头部。</span><br><span class="line">tail显示文件内容的尾部。</span><br><span class="line">cut将文件的每一行按指定分隔符分割并输出。</span><br><span class="line">split分割文件为不同的小片段。</span><br><span class="line">paste按行合并文件内容。</span><br><span class="line">sort对文件的文本内容排序。</span><br><span class="line">uniq去除重复行。oldboy</span><br><span class="line">wc统计文件的行数、单词数或字节数。</span><br><span class="line">iconv转换文件的编码格式。</span><br><span class="line">dos2unix将DOS格式文件转换成UNIX格式。</span><br><span class="line">diff全拼difference，比较文件的差异，常用于文本文件。</span><br><span class="line">vimdiff命令行可视化文件比较工具，常用于文本文件。</span><br><span class="line">rev反向输出文件内容。</span><br><span class="line">grep/egrep过滤字符串，三剑客老三。</span><br><span class="line">join按两个文件的相同字段合并。</span><br><span class="line">tr替换或删除字符。</span><br><span class="line">vi/vim命令行文本编辑器。</span><br></pre></td></tr></table></figure><h2 id="文件压缩及解压缩命令（4个）"><a href="#文件压缩及解压缩命令（4个）" class="headerlink" title="文件压缩及解压缩命令（4个）"></a>文件压缩及解压缩命令（4个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar打包压缩。oldboy</span><br><span class="line">unzip解压文件。</span><br><span class="line">gzipgzip压缩工具。</span><br><span class="line">zip压缩工具</span><br></pre></td></tr></table></figure><h2 id="信息显示命令（11个）"><a href="#信息显示命令（11个）" class="headerlink" title="信息显示命令（11个）"></a>信息显示命令（11个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">uname显示操作系统相关信息的命令。</span><br><span class="line">hostname显示或者设置当前系统的主机名。</span><br><span class="line">dmesg显示开机信息，用于诊断系统故障。</span><br><span class="line">uptime显示系统运行时间及负载。</span><br><span class="line">stat显示文件或文件系统的状态。</span><br><span class="line">du计算磁盘空间使用情况。</span><br><span class="line">df报告文件系统磁盘空间的使用情况。</span><br><span class="line">top实时显示系统资源使用情况。</span><br><span class="line">free查看系统内存。</span><br><span class="line">date显示与设置系统时间。</span><br><span class="line">cal查看日历等时间信息。</span><br></pre></td></tr></table></figure><h2 id="搜索文件命令（4个）"><a href="#搜索文件命令（4个）" class="headerlink" title="搜索文件命令（4个）"></a>搜索文件命令（4个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">which查找二进制命令，按环境变量PATH路径查找。</span><br><span class="line">find从磁盘遍历查找文件或目录。</span><br><span class="line">whereis查找二进制命令，按环境变量PATH路径查找。</span><br><span class="line">locate从数据库 (/var/lib/mlocate/mlocate.db) 查找命令，使用updatedb更新库。</span><br></pre></td></tr></table></figure><h2 id="用户管理命令（10个）老男孩"><a href="#用户管理命令（10个）老男孩" class="headerlink" title="用户管理命令（10个）老男孩"></a>用户管理命令（10个）老男孩</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">useradd添加用户。</span><br><span class="line">usermod修改系统已经存在的用户属性。</span><br><span class="line">userdel删除用户。</span><br><span class="line">groupadd添加用户组。</span><br><span class="line">passwd修改用户密码。</span><br><span class="line">chage修改用户密码有效期限。</span><br><span class="line">id查看用户的uid,gid及归属的用户组。</span><br><span class="line">su切换用户身份。</span><br><span class="line">visudo编辑/etc/sudoers文件的专属命令。</span><br><span class="line">sudo以另外一个用户身份（默认root用户）执行事先在sudoers文件允许的命令。</span><br></pre></td></tr></table></figure><h2 id="基础网络操作命令（11个）老男孩"><a href="#基础网络操作命令（11个）老男孩" class="headerlink" title="基础网络操作命令（11个）老男孩"></a>基础网络操作命令（11个）老男孩</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">telnet使用TELNET协议远程登录。</span><br><span class="line">ssh使用SSH加密协议远程登录。</span><br><span class="line">scp全拼secure copy，用于不同主机之间复制文件。</span><br><span class="line">wget命令行下载文件。</span><br><span class="line">ping测试主机之间网络的连通性。</span><br><span class="line">route显示和设置linux系统的路由表。</span><br><span class="line">ifconfig查看、配置、启用或禁用网络接口的命令。</span><br><span class="line">ifup启动网卡。</span><br><span class="line">ifdown关闭网卡。</span><br><span class="line">netstat查看网络状态。</span><br><span class="line">ss查看网络状态。</span><br></pre></td></tr></table></figure><h2 id="深入网络操作命令（9个）"><a href="#深入网络操作命令（9个）" class="headerlink" title="深入网络操作命令（9个）"></a>深入网络操作命令（9个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nmap网络扫描命令。</span><br><span class="line">lsof全名list open files，也就是列举系统中已经被打开的文件。</span><br><span class="line">mail发送和接收邮件。</span><br><span class="line">mutt邮件管理命令。</span><br><span class="line">nslookup交互式查询互联网DNS服务器的命令。</span><br><span class="line">dig查找DNS解析过程。</span><br><span class="line">host查询DNS的命令。</span><br><span class="line">traceroute追踪数据传输路由状况。</span><br><span class="line">tcpdump命令行的抓包工具。</span><br></pre></td></tr></table></figure><h2 id="有关磁盘与文件系统的命令（16个）"><a href="#有关磁盘与文件系统的命令（16个）" class="headerlink" title="有关磁盘与文件系统的命令（16个）"></a>有关磁盘与文件系统的命令（16个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mount挂载文件系统。</span><br><span class="line">umount卸载文件系统。</span><br><span class="line">fsck检查并修复Linux文件系统。</span><br><span class="line">dd转换或复制文件。</span><br><span class="line">dumpe2fs导出ext2/ext3/ext4文件系统信息。</span><br><span class="line">dumpext2/3/4文件系统备份工具。</span><br><span class="line">fdisk磁盘分区命令，适用于2TB以下磁盘分区。</span><br><span class="line">parted磁盘分区命令，没有磁盘大小限制，常用于2TB以下磁盘分区。</span><br><span class="line">mkfs格式化创建Linux文件系统。</span><br><span class="line">partprobe更新内核的硬盘分区表信息。</span><br><span class="line">e2fsck检查ext2/ext3/ext4类型文件系统。</span><br><span class="line">mkswap创建Linux交换分区。</span><br><span class="line">swapon启用交换分区。</span><br><span class="line">swapoff关闭交换分区。</span><br><span class="line">sync将内存缓冲区内的数据写入磁盘。</span><br><span class="line">resize2fs调整ext2/ext3/ext4文件系统大小。</span><br></pre></td></tr></table></figure><h2 id="系统权限及用户授权相关命令（4个）"><a href="#系统权限及用户授权相关命令（4个）" class="headerlink" title="系统权限及用户授权相关命令（4个）"></a>系统权限及用户授权相关命令（4个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod改变文件或目录权限。</span><br><span class="line">chown改变文件或目录的属主和属组。</span><br><span class="line">chgrp更改文件用户组。</span><br><span class="line">umask显示或设置权限掩码。</span><br></pre></td></tr></table></figure><h2 id="查看系统用户登陆信息的命令（7个）"><a href="#查看系统用户登陆信息的命令（7个）" class="headerlink" title="查看系统用户登陆信息的命令（7个）"></a>查看系统用户登陆信息的命令（7个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">whoami显示当前有效的用户名称，相当于执行id -un命令。</span><br><span class="line">who显示目前登录系统的用户信息。</span><br><span class="line">w显示已经登陆系统的用户列表，并显示用户正在执行的指令。</span><br><span class="line">last显示登入系统的用户。</span><br><span class="line">lastlog显示系统中所有用户最近一次登录信息。</span><br><span class="line">users显示当前登录系统的所有用户的用户列表。</span><br><span class="line">finger查找并显示用户信息。</span><br></pre></td></tr></table></figure><h2 id="内置命令及其它（19个）"><a href="#内置命令及其它（19个）" class="headerlink" title="内置命令及其它（19个）"></a>内置命令及其它（19个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">echo打印变量，或直接输出指定的字符串</span><br><span class="line">printf将结果格式化输出到标准输出。</span><br><span class="line">rpm管理rpm包的命令。</span><br><span class="line">yum自动化简单化地管理rpm包的命令。</span><br><span class="line">watch周期性的执行给定的命令，并将命令的输出以全屏方式显示。</span><br><span class="line">alias设置系统别名。</span><br><span class="line">unalias取消系统别名。</span><br><span class="line">date查看或设置系统时间。</span><br><span class="line">clear清除屏幕，简称清屏。</span><br><span class="line">history查看命令执行的历史纪录。</span><br><span class="line">eject弹出光驱。</span><br><span class="line">time计算命令执行时间。</span><br><span class="line">nc功能强大的网络工具。</span><br><span class="line">xargs将标准输入转换成命令行参数。</span><br><span class="line">exec调用并执行指令的命令。</span><br><span class="line">export设置或者显示环境变量。</span><br><span class="line">unset删除变量或函数。</span><br><span class="line">type用于判断另外一个命令是否是内置命令。</span><br><span class="line">bc命令行科学计算器</span><br></pre></td></tr></table></figure><h2 id="系统管理与性能监视命令-9个"><a href="#系统管理与性能监视命令-9个" class="headerlink" title="系统管理与性能监视命令(9个)"></a>系统管理与性能监视命令(9个)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">chkconfig管理Linux系统开机启动项。</span><br><span class="line">vmstat虚拟内存统计。</span><br><span class="line">mpstat显示各个可用CPU的状态统计。</span><br><span class="line">iostat统计系统IO。</span><br><span class="line">sar全面地获取系统的CPU、运行队列、磁盘 I/O、分页（交换区）、内存、 CPU中断和网络等性能数据。</span><br><span class="line">ipcs用于报告Linux中进程间通信设施的状态，显示的信息包括消息列表、共享内存和信号量的信息。</span><br><span class="line">ipcrm用来删除一个或更多的消息队列、信号量集或者共享内存标识。</span><br><span class="line">strace用于诊断、调试Linux用户空间跟踪器。我们用它来监控用户空间进程和内核的交互，比如系统调用、信号传递、进程状态变更等。</span><br><span class="line">ltrace命令会跟踪进程的库函数调用,它会显现出哪个库函数被调用。</span><br></pre></td></tr></table></figure><h2 id="关机-重启-注销和查看系统信息的命令（6个）"><a href="#关机-重启-注销和查看系统信息的命令（6个）" class="headerlink" title="关机/重启/注销和查看系统信息的命令（6个）"></a>关机/重启/注销和查看系统信息的命令（6个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">shutdown关机。</span><br><span class="line">halt关机。</span><br><span class="line">poweroff关闭电源。</span><br><span class="line">logout退出当前登录的Shell。</span><br><span class="line">exit退出当前登录的Shell。</span><br><span class="line">Ctrl+d退出当前登录的Shell的快捷键。</span><br><span class="line">reboot 重启</span><br></pre></td></tr></table></figure><h2 id="进程管理相关命令（15个）"><a href="#进程管理相关命令（15个）" class="headerlink" title="进程管理相关命令（15个）"></a>进程管理相关命令（15个）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">bg将一个在后台暂停的命令，变成继续执行  （在后台执行）。</span><br><span class="line">fg将后台中的命令调至前台继续运行。</span><br><span class="line">jobs查看当前有多少在后台运行的命令。</span><br><span class="line">kill终止进程。</span><br><span class="line">killall通过进程名终止进程。</span><br><span class="line">pkill通过进程名终止进程。</span><br><span class="line">crontab定时任务命令。</span><br><span class="line">ps显示进程的快照。</span><br><span class="line">pstree树形显示进程。</span><br><span class="line">nice/renice调整程序运行的优先级。</span><br><span class="line">nohup忽略挂起信号运行指定的命令。</span><br><span class="line">pgrep查找匹配条件的进程。</span><br><span class="line">runlevel查看系统当前运行级别。</span><br><span class="line">init切换运行级别。</span><br><span class="line">service启动、停止、重新启动和关闭系统服务，还可以显示所有系统服务的当前状态。</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> command </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>6，sed引用shell变量</title>
      <link href="/2018/09/04/6%EF%BC%8Csed%E5%BC%95%E7%94%A8shell%E5%8F%98%E9%87%8F/"/>
      <url>/2018/09/04/6%EF%BC%8Csed%E5%BC%95%E7%94%A8shell%E5%8F%98%E9%87%8F/</url>
      <content type="html"><![CDATA[<h2 id="下面是可以使用的几种方法"><a href="#下面是可以使用的几种方法" class="headerlink" title="下面是可以使用的几种方法"></a>下面是可以使用的几种方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 推荐使用这种方法</span></span><br><span class="line">sed -i <span class="string">'s#centos#'</span><span class="string">"<span class="variable">$name</span>"</span><span class="string">'#g'</span> test.txt</span><br><span class="line"></span><br><span class="line"><span class="built_in">eval</span> sed <span class="string">'s/$a/$b/'</span> filename</span><br><span class="line">sed <span class="string">"s/<span class="variable">$a</span>/<span class="variable">$b</span>/"</span> filename</span><br><span class="line">sed <span class="string">'s/'</span><span class="variable">$a</span><span class="string">'/'</span><span class="variable">$b</span><span class="string">'/'</span> filename</span><br><span class="line">sed s/<span class="variable">$a</span>/<span class="variable">$b</span>/ filename</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@centos691 /server/scripts]<span class="comment"># cat test.txt</span></span><br><span class="line">centos</span><br><span class="line">[root@centos691 /server/scripts]<span class="comment"># name=oldboy;sed -n 's#centos#'"$name"'#gp' test.txt</span></span><br><span class="line">oldboy</span><br><span class="line">[root@centos691 /server/scripts]<span class="comment"># name=oldboy;sed -n 's#centos#'$name'#gp' test.txt</span></span><br><span class="line">oldboy</span><br><span class="line">[root@centos691 /server/scripts]<span class="comment"># name=oldboy;sed -n "s#centos#$name#gp" test.txt</span></span><br><span class="line">oldboy</span><br><span class="line">[root@centos691 /server/scripts]<span class="comment"># name=oldboy;sed -n s#centos#$name#gp test.txt</span></span><br><span class="line">oldboy</span><br><span class="line">[root@centos691 /server/scripts]<span class="comment"># name=oldboy;eval sed -n 's#centos#$name#gp' test.txt</span></span><br><span class="line">oldboy</span><br></pre></td></tr></table></figure><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 克隆完成之后，修改IP和主机名</span></span><br><span class="line">ip=51;name=db01;</span><br><span class="line">sed -i <span class="string">'/IPADDR/s#210$#'</span><span class="string">"<span class="variable">$ip</span>"</span><span class="string">'#g'</span> /etc/sysconfig/network-scripts/ifcfg-eth*;</span><br><span class="line">sed -i <span class="string">'s#oldboyedu-muban#'</span><span class="string">"<span class="variable">$name</span>"</span><span class="string">'#g'</span> /etc/sysconfig/network;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> sed </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>5，LNMP系列（三）之php源码安装</title>
      <link href="/2018/09/03/5%EF%BC%8CLNMP%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89%E4%B9%8Bphp%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85/"/>
      <url>/2018/09/03/5%EF%BC%8CLNMP%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%89%EF%BC%89%E4%B9%8Bphp%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h1 id="LNMP系列（三）之php源码安装"><a href="#LNMP系列（三）之php源码安装" class="headerlink" title="LNMP系列（三）之php源码安装"></a>LNMP系列（三）之php源码安装</h1><h1 id="php源码安装"><a href="#php源码安装" class="headerlink" title="php源码安装"></a>php源码安装</h1><blockquote><p>解压PHP软件，进行编译安装，将程序安装到/application目录中，并且创建软链接</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install zlib-devel libxml2-devel libjpeg-devel libjpeg-turbo-devel curl-devel -y</span><br><span class="line">yum install freetype-devel libpng-devel gd-devel libcurl-devel libxslt-devel libxslt-devel -y</span><br><span class="line">rpm -qa zlib-devel libxml2-devel libjpeg-devel libjpeg-turbo-devel curl-devel freetype-devel libpng-devel gd-devel libcurl-devel libxslt-devel libxslt-devel</span><br></pre></td></tr></table></figure><h2 id="安装其它相关程序—libmcrypt"><a href="#安装其它相关程序—libmcrypt" class="headerlink" title="安装其它相关程序—libmcrypt"></a>安装其它相关程序—libmcrypt</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#wget -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-6.repo</span></span><br><span class="line"></span><br><span class="line">yum -y install libmcrypt-devel mhash mcrypt</span><br><span class="line">rpm -qa libmcrypt-devel mhash mcrypt </span><br><span class="line"></span><br><span class="line"> http://php.net/releases/</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="安装PHP软件程序"><a href="#安装PHP软件程序" class="headerlink" title="安装PHP软件程序"></a>安装PHP软件程序</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#下载安装包并解压</span></span><br><span class="line"><span class="built_in">cd</span> ~/tools/</span><br><span class="line">wget http://cn2.php.net/distributions/php-5.6.36.tar.gz</span><br><span class="line"></span><br><span class="line">tar xf php-5.6.36.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> php-5.6.36           <span class="comment">#----正式编译前也可以把这个软件安装上（libxslt*）</span></span><br><span class="line"></span><br><span class="line">./configure --prefix=/apps/php-5.6.36 \</span><br><span class="line">--with-mysql=mysqlnd \</span><br><span class="line">--with-pdo-mysql=mysqlnd \</span><br><span class="line">--with-freetype-dir \</span><br><span class="line">--with-jpeg-dir \</span><br><span class="line">--with-png-dir \</span><br><span class="line">--with-zlib \</span><br><span class="line">--with-libxml-dir=/usr \</span><br><span class="line">--<span class="built_in">enable</span>-xml \</span><br><span class="line">--<span class="built_in">disable</span>-rpath \</span><br><span class="line">--<span class="built_in">enable</span>-bcmath \</span><br><span class="line">--<span class="built_in">enable</span>-shmop \</span><br><span class="line">--<span class="built_in">enable</span>-sysvsem \</span><br><span class="line">--<span class="built_in">enable</span>-inline-optimization \</span><br><span class="line">--with-curl \</span><br><span class="line">--<span class="built_in">enable</span>-mbregex \</span><br><span class="line">--<span class="built_in">enable</span>-fpm \</span><br><span class="line">--<span class="built_in">enable</span>-mbstring \</span><br><span class="line">--with-mcrypt \</span><br><span class="line">--with-gd \</span><br><span class="line">--<span class="built_in">enable</span>-gd-native-ttf \</span><br><span class="line">--with-openssl \</span><br><span class="line">--with-mhash \</span><br><span class="line">--<span class="built_in">enable</span>-pcntl \</span><br><span class="line">--<span class="built_in">enable</span>-sockets \</span><br><span class="line">--with-xmlrpc \</span><br><span class="line">--<span class="built_in">enable</span>-soap \</span><br><span class="line">--<span class="built_in">enable</span>-short-tags \</span><br><span class="line">--<span class="built_in">enable</span>-static \</span><br><span class="line">--with-xsl \</span><br><span class="line">--with-fpm-user=www \</span><br><span class="line">--with-fpm-group=www \</span><br><span class="line">--<span class="built_in">enable</span>-ftp \</span><br><span class="line">--<span class="built_in">enable</span>-opcache=no</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##提示 如下内容 即成功</span></span><br><span class="line">Generating files</span><br><span class="line">configure: creating ./config.status</span><br><span class="line">creating main/internal_functions.c</span><br><span class="line">creating main/internal_functions_cli.c</span><br><span class="line">+--------------------------------------------------------------------+</span><br><span class="line">| License:                                                           |</span><br><span class="line">| This software is subject to the PHP License, available <span class="keyword">in</span> this     |</span><br><span class="line">| distribution <span class="keyword">in</span> the file LICENSE.  By continuing this installation |</span><br><span class="line">| process, you are bound by the terms of this license agreement.     |</span><br><span class="line">| If you <span class="keyword">do</span> not agree with the terms of this license, you must abort |</span><br><span class="line">| the installation process at this point.                            |</span><br><span class="line">+--------------------------------------------------------------------+</span><br><span class="line"></span><br><span class="line">Thank you <span class="keyword">for</span> using PHP.</span><br><span class="line"></span><br><span class="line">config.status: creating php5.spec</span><br><span class="line">config.status: creating main/build-defs.h</span><br><span class="line">config.status: creating scripts/phpize</span><br><span class="line">config.status: creating scripts/man1/phpize.1</span><br><span class="line">config.status: creating scripts/php-config</span><br><span class="line">config.status: creating scripts/man1/php-config.1</span><br><span class="line">config.status: creating sapi/cli/php.1</span><br><span class="line">config.status: creating sapi/fpm/php-fpm.conf</span><br><span class="line">config.status: creating sapi/fpm/init.d.php-fpm</span><br><span class="line">config.status: creating sapi/fpm/php-fpm.service</span><br><span class="line">config.status: creating sapi/fpm/php-fpm.8</span><br><span class="line">config.status: creating sapi/fpm/status.html</span><br><span class="line">config.status: creating sapi/cgi/php-cgi.1</span><br><span class="line">config.status: creating ext/phar/phar.1</span><br><span class="line">config.status: creating ext/phar/phar.phar.1</span><br><span class="line">config.status: creating main/php_config.h</span><br><span class="line">config.status: executing default commands</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ln -s /apps/mysql/lib/libmysqlclient.so.18  /usr/lib64/  <span class="comment">#可以不创建 </span></span><br><span class="line">touch ext/phar/phar.phar <span class="comment">#这个文件一定要创建</span></span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">ln -s /apps/php-5.6.36/ /apps/php</span><br><span class="line"></span><br><span class="line">Generating phar.php</span><br><span class="line">Generating phar.phar</span><br><span class="line">PEAR package PHP_Archive not installed: generated phar will require PHP<span class="string">'s phar extension be enabled.</span></span><br><span class="line"><span class="string">clicommand.inc</span></span><br><span class="line"><span class="string">pharcommand.inc</span></span><br><span class="line"><span class="string">invertedregexiterator.inc</span></span><br><span class="line"><span class="string">directorygraphiterator.inc</span></span><br><span class="line"><span class="string">directorytreeiterator.inc</span></span><br><span class="line"><span class="string">phar.inc</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Build complete.</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 php-5.6.36]<span class="comment"># make install </span></span><br><span class="line">Installing PHP CLI binary:        /apps/php-5.6.36/bin/</span><br><span class="line">Installing PHP CLI man page:      /apps/php-5.6.36/php/man/man1/</span><br><span class="line">Installing PHP FPM binary:        /apps/php-5.6.36/sbin/</span><br><span class="line">Installing PHP FPM config:        /apps/php-5.6.36/etc/</span><br><span class="line">Installing PHP FPM man page:      /apps/php-5.6.36/php/man/man8/</span><br><span class="line">Installing PHP FPM status page:      /apps/php-5.6.36/php/php/fpm/</span><br><span class="line">Installing PHP CGI binary:        /apps/php-5.6.36/bin/</span><br><span class="line">Installing PHP CGI man page:      /apps/php-5.6.36/php/man/man1/</span><br><span class="line">Installing build environment:     /apps/php-5.6.36/lib/php/build/</span><br><span class="line">Installing header files:          /apps/php-5.6.36/include/php/</span><br><span class="line">Installing helper programs:       /apps/php-5.6.36/bin/</span><br><span class="line">  program: phpize</span><br><span class="line">  program: php-config</span><br><span class="line">Installing man pages:             /apps/php-5.6.36/php/man/man1/</span><br><span class="line">  page: phpize.1</span><br><span class="line">  page: php-config.1</span><br><span class="line">Installing PEAR environment:      /apps/php-5.6.36/lib/php/</span><br><span class="line">[PEAR] Archive_Tar    - installed: 1.4.0</span><br><span class="line">[PEAR] Console_Getopt - installed: 1.4.1</span><br><span class="line">[PEAR] Structures_Graph- installed: 1.1.1</span><br><span class="line">[PEAR] XML_Util       - installed: 1.3.0</span><br><span class="line">[PEAR] PEAR           - installed: 1.10.1</span><br><span class="line">Wrote PEAR system config file at: /apps/php-5.6.36/etc/pear.conf</span><br><span class="line">You may want to add: /apps/php-5.6.36/lib/php to your php.ini include_path</span><br><span class="line">/root/tools/php-5.6.36/build/shtool install -c ext/phar/phar.phar /apps/php-5.6.36/bin</span><br><span class="line">ln -s -f phar.phar /apps/php-5.6.36/bin/phar</span><br><span class="line">Installing PDO headers:          /apps/php-5.6.36/include/php/ext/pdo/</span><br><span class="line">[root@web01 php-5.6.36]<span class="comment"># echo $?</span></span><br><span class="line">0</span><br></pre></td></tr></table></figure><h2 id="复制php-ini配置文件"><a href="#复制php-ini配置文件" class="headerlink" title="复制php.ini配置文件"></a>复制php.ini配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 php-5.6.36]<span class="comment"># cp /root/tools/php-5.6.36/php.ini-production  /apps/php-5.6.36/lib/php.ini</span></span><br></pre></td></tr></table></figure><h2 id="复制php-fpm配置文件"><a href="#复制php-fpm配置文件" class="headerlink" title="复制php-fpm配置文件"></a>复制php-fpm配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@web01 php-5.6.36]<span class="comment"># cd /apps/php-5.6.36/etc/</span></span><br><span class="line">[root@web01 etc]<span class="comment"># ls </span></span><br><span class="line">pear.conf  php-fpm.conf.default</span><br><span class="line">[root@web01 etc]<span class="comment"># cp php-fpm.conf.default php-fpm.conf</span></span><br><span class="line">[root@web01 etc]<span class="comment"># ll</span></span><br><span class="line">total 52</span><br><span class="line">-rw-r--r-- 1 root root  1332 Feb 27 22:53 pear.conf</span><br><span class="line">-rw-r--r-- 1 root root 22609 Feb 27 22:56 php-fpm.conf</span><br><span class="line">-rw-r--r-- 1 root root 22609 Feb 27 22:53 php-fpm.conf.default</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@web01 etc]<span class="comment"># /apps/php-5.6.36/sbin/php-fpm -t</span></span><br><span class="line">[27-Feb-2018 22:56:53] NOTICE: configuration file /apps/php-5.6.36/etc/php-fpm.conf <span class="built_in">test</span> is successful</span><br><span class="line"></span><br><span class="line">[root@web01 etc]<span class="comment"># /apps/php-5.6.36/sbin/php-fpm </span></span><br><span class="line">[root@web01 etc]<span class="comment"># ss -lntup |grep 9000</span></span><br><span class="line">tcp    LISTEN     0      16384          127.0.0.1:9000                  *:*      users:((<span class="string">"php-fpm"</span>,129733,7),(<span class="string">"php-fpm"</span>,129734,0),(<span class="string">"php-fpm"</span>,129735,0))</span><br></pre></td></tr></table></figure><h2 id="LNMP搭建网站前的测试。"><a href="#LNMP搭建网站前的测试。" class="headerlink" title="LNMP搭建网站前的测试。"></a>LNMP搭建网站前的测试。</h2><blockquote><p>测试nginx与php配合是否成功<br>php与MySQL配合是否成功<br>部署网站</p></blockquote><h2 id="测试nginx与php配合是否成功"><a href="#测试nginx与php配合是否成功" class="headerlink" title="测试nginx与php配合是否成功"></a>测试nginx与php配合是否成功</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  blog.etiantian.org;</span><br><span class="line">            root   html/blog;</span><br><span class="line">            index  index.php index.html index.htm;</span><br><span class="line">        location ~ .*\.(php|php5)?$ &#123;</span><br><span class="line">            fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">            fastcgi_index  index.php;</span><br><span class="line">            include       fastcgi.conf;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'&lt;?php phpinfo();?&gt;'</span> &gt;/apps/nginx/html/blog/test_info.php</span><br></pre></td></tr></table></figure><h2 id="php与MySQL配合是否成功"><a href="#php与MySQL配合是否成功" class="headerlink" title="php与MySQL配合是否成功"></a>php与MySQL配合是否成功</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">test_mysql.php</span><br><span class="line"></span><br><span class="line">&lt;?php</span><br><span class="line">     //<span class="variable">$link_id</span>=mysql_connect(<span class="string">'主机名'</span>,<span class="string">'用户'</span>,<span class="string">'密码'</span>);</span><br><span class="line">    <span class="variable">$link_id</span>=mysql_connect(<span class="string">'172.16.1.51'</span>,<span class="string">'wordpress'</span>,<span class="string">'123456'</span>) or mysql_error();</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable">$link_id</span>)&#123;</span><br><span class="line">         <span class="built_in">echo</span> <span class="string">"mysql successful by oldboy ! \n"</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="built_in">echo</span> mysql_error();</span><br><span class="line">    &#125;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lnmp </tag>
            
            <tag> php </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>4，LNMP系列（二）之MySQL</title>
      <link href="/2018/09/03/4%EF%BC%8CLNMP%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89%E4%B9%8BMySQL/"/>
      <url>/2018/09/03/4%EF%BC%8CLNMP%E7%B3%BB%E5%88%97%EF%BC%88%E4%BA%8C%EF%BC%89%E4%B9%8BMySQL/</url>
      <content type="html"><![CDATA[<h1 id="LNMP系列（二）之MySQL安装–二进制安装"><a href="#LNMP系列（二）之MySQL安装–二进制安装" class="headerlink" title="LNMP系列（二）之MySQL安装–二进制安装"></a>LNMP系列（二）之MySQL安装–二进制安装</h1><h1 id="二进制安装MySQL-5-6-40"><a href="#二进制安装MySQL-5-6-40" class="headerlink" title="二进制安装MySQL-5.6.40"></a>二进制安装MySQL-5.6.40</h1><h2 id="0-准备工作-下载mysql"><a href="#0-准备工作-下载mysql" class="headerlink" title="0.准备工作-下载mysql"></a>0.准备工作-下载mysql</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://downloads.mysql.com/archives/community/</span><br><span class="line"></span><br><span class="line">mkdir /root/tools -p</span><br><span class="line">cd /root/tools</span><br><span class="line">wget https://downloads.mysql.com/archives/get/file/mysql-5.6.40-linux-glibc2.12-x86_64.tar.gz</span><br></pre></td></tr></table></figure><h2 id="1-添加用户"><a href="#1-添加用户" class="headerlink" title="1.添加用户"></a>1.添加用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -s /sbin/nologin  -M mysql</span><br></pre></td></tr></table></figure><h2 id="2-解压-mysql-二进制包"><a href="#2-解压-mysql-二进制包" class="headerlink" title="2.解压 mysql 二进制包"></a>2.解压 mysql 二进制包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /root/tools</span><br><span class="line">tar xf mysql-5.6.40-*-x86_64.tar.gz</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="3-把MySQL-移动到-apps"><a href="#3-把MySQL-移动到-apps" class="headerlink" title="3.把MySQL 移动到 /apps/"></a>3.把MySQL 移动到 /apps/</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /apps/</span><br><span class="line">mv /root/tools/mysql-5.6.40-*-x86_64 /apps/mysql-5.6.40</span><br></pre></td></tr></table></figure><h2 id="4-创建软连接"><a href="#4-创建软连接" class="headerlink" title="4.创建软连接"></a>4.创建软连接</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /apps/mysql-5.6.40/ /apps/mysql</span><br></pre></td></tr></table></figure><h2 id="5-让MySQL用户管理-apps-mysql"><a href="#5-让MySQL用户管理-apps-mysql" class="headerlink" title="5.让MySQL用户管理 /apps/mysql"></a>5.让MySQL用户管理 /apps/mysql</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown -R mysql.mysql /apps/mysql/data</span><br></pre></td></tr></table></figure><h2 id="6-安装这个软件-初始化数据库"><a href="#6-安装这个软件-初始化数据库" class="headerlink" title="6.安装这个软件  初始化数据库"></a>6.安装这个软件  初始化数据库</h2><blockquote><p>#1.软件安装在哪里</p><p>#2.数据存放在哪里</p><p>#3.MySQL使用的用户谁？</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/apps/mysql/scripts/mysql_install_db --basedir=/apps/mysql --datadir=/apps/mysql/data --user=mysql</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#####To start mysqld at boot time you have to copy</span><br><span class="line">#####support-files/mysql.server to the right place for your system</span><br><span class="line">#####mysql启动脚本 默认放在support-files/mysql.server</span><br><span class="line">#####</span><br><span class="line">#####记得给MySQL设置个密码</span><br><span class="line">#####PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !</span><br><span class="line">#####To do so, start the server, then issue the following commands:</span><br><span class="line">#####</span><br><span class="line">#####  /apps/mysql/bin/mysqladmin -u root          password &apos;new-password&apos;</span><br><span class="line">#####  /apps/mysql/bin/mysqladmin -u root -h web01 password &apos;new-password&apos;</span><br></pre></td></tr></table></figure><h2 id="7-复制启动脚本-授权"><a href="#7-复制启动脚本-授权" class="headerlink" title="7.复制启动脚本 授权"></a>7.复制启动脚本 授权</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp /apps/mysql/support-files/mysql.server  /etc/init.d/mysqld</span><br><span class="line">chmod +x /etc/init.d/mysqld</span><br></pre></td></tr></table></figure><h2 id="8-修改启动脚本-和-mysql命令-中的路径"><a href="#8-修改启动脚本-和-mysql命令-中的路径" class="headerlink" title="8.修改启动脚本 和 mysql命令 中的路径"></a>8.修改启动脚本 和 mysql命令 中的路径</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &apos;s#/usr/local/mysql#/apps/mysql#g&apos; /apps/mysql/bin/mysqld_safe /etc/init.d/mysqld</span><br></pre></td></tr></table></figure><h2 id="9-复制-默认的配置文件"><a href="#9-复制-默认的配置文件" class="headerlink" title="9.复制 默认的配置文件"></a>9.复制 默认的配置文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">\cp /apps/mysql/support-files/my-default.cnf /etc/my.cnf</span><br><span class="line">/etc/init.d/mysqld start</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">###故障</span><br><span class="line">##1./tmp权限</span><br><span class="line">##2.主机名解析 hosts解析 #ping 主机名</span><br><span class="line">##3.一步一步执行</span><br><span class="line"></span><br><span class="line">##</span><br><span class="line">##/apps/mysql/bin/mysql</span><br><span class="line">##Welcome to the MySQL monitor.  Commands end with ; or \g.</span><br><span class="line">##Your MySQL connection id is 1</span><br><span class="line">##Server version: 5.5.49 MySQL Community Server (GPL)</span><br><span class="line">##</span><br><span class="line">##Copyright (c) 2000, 2016, Oracle and/or its affiliates. All rights reserved.</span><br><span class="line">##</span><br><span class="line">##Oracle is a registered trademark of Oracle Corporation and/or its</span><br><span class="line">##affiliates. Other names may be trademarks of their respective</span><br><span class="line">##owners.</span><br><span class="line">##</span><br><span class="line">##Type &apos;help;&apos; or &apos;\h&apos; for help. Type &apos;\c&apos; to clear the current input statement.</span><br><span class="line">##</span><br><span class="line">##mysql&gt;</span><br></pre></td></tr></table></figure><h2 id="10-PATH路径"><a href="#10-PATH路径" class="headerlink" title="10.PATH路径"></a>10.PATH路径</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;export PATH=/apps/mysql/bin:$PATH&apos; &gt;&gt;/etc/profile</span><br><span class="line">source /etc/profile</span><br><span class="line">which mysql</span><br></pre></td></tr></table></figure><h2 id="11-加入开机自启动"><a href="#11-加入开机自启动" class="headerlink" title="11.加入开机自启动"></a>11.加入开机自启动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chkconfig --add mysqld</span><br><span class="line">chkconfig mysqld on</span><br></pre></td></tr></table></figure><h2 id="12-给MySQL-root用户设置密码"><a href="#12-给MySQL-root用户设置密码" class="headerlink" title="12.给MySQL root用户设置密码"></a>12.给MySQL root用户设置密码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/apps/mysql/bin/mysqladmin -u root password &apos;oldboy123&apos;</span><br></pre></td></tr></table></figure><h2 id="13-重新登录MySQL数据库"><a href="#13-重新登录MySQL数据库" class="headerlink" title="13.重新登录MySQL数据库"></a>13.重新登录MySQL数据库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -poldboy123</span><br></pre></td></tr></table></figure><h2 id="14-数据库基础框架"><a href="#14-数据库基础框架" class="headerlink" title="14.数据库基础框架"></a>14.数据库基础框架</h2><ul><li>#1.数据库  test mysql</li><li>#2.表格</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#mysql SQL语句</span><br><span class="line">#查看系统中所有数据库</span><br><span class="line">#show databases;</span><br><span class="line">#查看系统中所有的用户</span><br><span class="line">#使用某一个数据库</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; #查看当前都有啥</span><br><span class="line">mysql&gt; show databases;        //********</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| test               |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows in set (0.07 sec)</span><br></pre></td></tr></table></figure><h2 id="初级-查看系列-开始"><a href="#初级-查看系列-开始" class="headerlink" title="初级 查看系列-开始"></a>初级 查看系列-开始</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">##使用某一个数据库</span><br><span class="line">###相当于进入 mysql 数据库中  cd mysql ;  cd test</span><br><span class="line">#use mysql</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">##我想查看当前在哪？ pwd    当前正在使用哪个数据库</span><br><span class="line">select database();</span><br><span class="line">+------------+</span><br><span class="line">| database() |</span><br><span class="line">+------------+</span><br><span class="line">| mysql      |</span><br><span class="line">+------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">##我是谁？           查看当前用户</span><br><span class="line">select user();</span><br><span class="line">+----------------+</span><br><span class="line">| user()         |</span><br><span class="line">+----------------+</span><br><span class="line">| root@localhost |</span><br><span class="line">+----------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">###当前系统都有什么用户？ 他们可以在哪里登录？  *****</span><br><span class="line">select user,host from mysql.user;</span><br><span class="line">+------+-----------+</span><br><span class="line">| user | host      |</span><br><span class="line">+------+-----------+</span><br><span class="line">| root | 127.0.0.1 |</span><br><span class="line">| root | ::1       |</span><br><span class="line">|      | localhost |</span><br><span class="line">| root | localhost |</span><br><span class="line">|      | web01     |</span><br><span class="line">| root | web01     |</span><br><span class="line">+------+-----------+</span><br><span class="line">6 rows in set (0.02 sec)</span><br><span class="line">####初级 查看系列-结束</span><br><span class="line">###show databases;</span><br><span class="line">###select user,host from mysql.user;</span><br></pre></td></tr></table></figure><h2 id="初级-添加删除系列"><a href="#初级-添加删除系列" class="headerlink" title="初级 添加删除系列"></a>初级 添加删除系列</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#创建数据库</span><br><span class="line">create database wordpress;</span><br><span class="line"></span><br><span class="line">#删除数据库</span><br><span class="line">drop database wordpress;</span><br><span class="line"></span><br><span class="line">#添加用户</span><br><span class="line">grant all on wordpress.* to &apos;wordpress&apos;@&apos;172.16.1.0/255.255.255.0&apos; identified by &apos;123456&apos;;</span><br><span class="line"></span><br><span class="line">grant all on wordpress.* to &apos;wordpress&apos;@&apos;172.16.1.0/255.255.255.0&apos; identified by &apos;123456&apos;;</span><br><span class="line">授权所有的权限, wordpress数据库所有的权限 给 wordpress用户 可以在172.16.1.0/255.255.255.0  网段登录数据库  这个用户的密码123456；</span><br><span class="line"></span><br><span class="line">#更新系统的权限表</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">###进行测试</span><br><span class="line">mysql -uwordpress -p123456</span><br><span class="line"></span><br><span class="line">mysql -uwordpress -p -h 172.16.1.8</span><br><span class="line"></span><br><span class="line">#删除用户</span><br><span class="line">drop user wordpress@&apos;172.16.1.8&apos;;</span><br></pre></td></tr></table></figure><blockquote><p>###1.查看都有什么数据库</p><p>###2.查看都有什么用户</p><p>###3.添加用户</p></blockquote><h2 id="help-sql语句。"><a href="#help-sql语句。" class="headerlink" title="help sql语句。"></a>help sql语句。</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#跳过授权表（不用密码登录）</span><br><span class="line">#/etc/init.d/mysqld restart --skip-grant-table</span><br><span class="line"></span><br><span class="line">#mysql 命令行</span><br><span class="line">#-u 指定用户</span><br><span class="line">#-p 指定密码（不要有空格）</span><br><span class="line">#-h 连接到某一台服务器</span><br><span class="line"></span><br><span class="line">#更改密码 mysqladmin -uroot -poldboy123 password &apos;新的密码&apos;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> lnmp </tag>
            
            <tag> mysql </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>3，LNMP系列（一）nginx源码安装</title>
      <link href="/2018/08/24/3%EF%BC%8CLNMP%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89nginx%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85/"/>
      <url>/2018/08/24/3%EF%BC%8CLNMP%E7%B3%BB%E5%88%97%EF%BC%88%E4%B8%80%EF%BC%89nginx%E6%BA%90%E7%A0%81%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h1 id="LNMP系列（一）nginx源码安装"><a href="#LNMP系列（一）nginx源码安装" class="headerlink" title="LNMP系列（一）nginx源码安装"></a>LNMP系列（一）nginx源码安装</h1><h2 id="下载安装过程"><a href="#下载安装过程" class="headerlink" title="下载安装过程"></a>下载安装过程</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /root/</span><br><span class="line">mkdir tools</span><br><span class="line"><span class="built_in">cd</span> tools/</span><br><span class="line"></span><br><span class="line">yum install openssl openssl-devel -y</span><br><span class="line">yum install pcre pcre-devel -y</span><br><span class="line"><span class="comment">#useradd www -s /sbin/nologin -M</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#在阿里云服务器上，只有把用户名写在最后，才可以成功创建用户 </span></span><br><span class="line">useradd -s /sbin/nologin -u 1888 -M www</span><br><span class="line"></span><br><span class="line">wget -q http://nginx.org/download/nginx-1.14.0.tar.gz</span><br><span class="line">tar xf nginx-1.14.0.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> nginx-1.14.0</span><br><span class="line"></span><br><span class="line">./configure --user=www --group=www --with-http_ssl_module --with-http_stub_status_module  --prefix=/apps/nginx-1.14.0/</span><br><span class="line"></span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line"></span><br><span class="line">ln -s /apps/nginx-1.14.0/ /apps/nginx</span><br><span class="line">ln -s /apps/nginx/sbin/nginx /usr/bin/nginx</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'/application/nginx/sbin/nginx'</span> &gt;&gt; /etc/rc.local</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="检查-重启"><a href="#检查-重启" class="headerlink" title="检查 重启"></a>检查 重启</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/apps/nginx/sbin/nginx -t</span><br><span class="line"></span><br><span class="line">/apps/nginx/sbin/nginx -s reload</span><br></pre></td></tr></table></figure><h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    sendfile        on;</span><br><span class="line">    keepalive_timeout  65;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        server_name  10.0.0.61; # 域名</span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /mnt/hgfs/rpm; # 网站根目录</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">            autoindex on; # 目录列表</span><br><span class="line">            autoindex_exact_size off;</span><br><span class="line">            autoindex_localtime on;</span><br><span class="line">        &#125;</span><br><span class="line">        error_page   500 502 503 504  /50x.html;</span><br><span class="line">        location = /50x.html &#123;</span><br><span class="line">            root   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2，hexo改换主题</title>
      <link href="/2018/08/24/2%EF%BC%8Chexo-theme/"/>
      <url>/2018/08/24/2%EF%BC%8Chexo-theme/</url>
      <content type="html"><![CDATA[<h1 id="hexo-更换主题"><a href="#hexo-更换主题" class="headerlink" title="hexo 更换主题"></a>hexo 更换主题</h1><p>自己在github上搭建了一个博客，主题不喜欢，所以就换一个，个人比较喜欢的有两个，一个是light，另了个是next。</p><h2 id="安装主题"><a href="#安装主题" class="headerlink" title="安装主题"></a>安装主题</h2><p>安装都很简单，进入你hexo的根目录，直接git就可以了。每个主题都有给出安装方法，很简单。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#light</span></span><br><span class="line"> git <span class="built_in">clone</span> https://github.com/hexojs/hexo-theme-light.git themes/light</span><br><span class="line"></span><br><span class="line"><span class="comment">#next</span></span><br><span class="line"> git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure></p><a id="more"></a><h2 id="使用主题"><a href="#使用主题" class="headerlink" title="使用主题"></a>使用主题</h2><p>使用也很简单，到_config.yml配置文件中，修改theme选项</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> blog </category>
          
      </categories>
      
      
        <tags>
            
            <tag> theme </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>1，Hello World</title>
      <link href="/2018/08/23/1%EF%BC%8Chello-world/"/>
      <url>/2018/08/23/1%EF%BC%8Chello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a><br><a id="more"></a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
    </entry>
    
  
  
</search>
